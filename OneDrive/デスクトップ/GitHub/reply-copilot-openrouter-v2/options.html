<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>君斗りんくのAI返信サジェスト[定型文・履歴機能付き] - 設定</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Content-Security-Policy" content="script-src 'self'; object-src 'none'" />
  <link rel="stylesheet" href="styles.css" />
  <style>
    body {
      width: auto !important;
      height: 100vh !important;
      max-height: 100vh !important;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      overflow-y: auto !important;
      box-sizing: border-box;
    }
    
    main {
      overflow-y: auto !important;
      max-height: 100vh !important;
      box-sizing: border-box;
    }
    
    .info-box {
      background: #e3f2fd;
      border-left: 4px solid #1976d2;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 20px;
      font-size: 14px;
      line-height: 1.6;
    }
    
    .info-box strong {
      color: #1565c0;
    }
    
    .info-box a {
      color: #1976d2;
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <header style="margin-bottom: 15px;">
    <div class="header-content">
      <img src="images/link.png" alt="君斗りんく" class="header-logo" />
      <div class="header-text">
        <h1>⚙️ 君斗りんくのAI返信サジェスト[定型文・履歴機能付き] - 設定</h1>
        <p class="header-subtitle">APIキーを設定してAI機能を有効化</p>
      </div>
    </div>
  </header>

  <main style="background: #f5f5f5; padding: 0;">
    <!-- 簡潔な説明 -->
    <div style="background: #e3f2fd; padding: 8px; margin-bottom: 10px; border-radius: 4px; border-left: 3px solid #1976d2; font-size: 13px;">
      <strong>👉</strong> <a href="https://openrouter.ai/" target="_blank" style="color: #1976d2; font-weight: bold;">OpenRouter</a> でAPIキー取得（無料プランあり）
    </div>
    
    <!-- 精度向上の説明 -->
    <div class="info-box">
      <strong>📊 精度を上げたい場合</strong><br>
      現在のデフォルトは<strong>無料モデル</strong>（google/gemma-2-9b-it:free）です。<br>
      より安定した動作を希望する場合は、以下の方法で<strong>有料モデル</strong>に切り替えられます：<br>
      <ul style="margin: 10px 0; padding-left: 20px;">
        <li><strong>方法１：設定画面で切り替え</strong><br>
        下の「AIモデル」ドロップダウンで<strong>💵 有料モデル</strong>（GPT-4o miniなど）を選択</li>
        <li><strong>方法２：コードで切り替え</strong><br>
        <code>ai/core/ai-service.js</code>の11行目：<code>const DEFAULT_MODEL = 'google/gemma-2-9b-it';</code>（<code>:free</code>を削除）</li>
      </ul>
      <strong>💰 コスト</strong>：月約30円（100回使用/月の場合）<br>
      <strong>✅ メリット</strong>：空の応答エラーが減少、複雑なプロンプトに対応、レート制限が緩い
    </div>

    <!-- ステータスバー -->
    <div id="statusBar" style="display: none; margin-bottom: 10px;"></div>

    <!-- 設定フォーム -->
    <div class="form-section">
      <div class="form-row">
        <label for="provider">🌐 プロバイダ</label>
        <select id="provider">
          <option value="openrouter">OpenRouter（推奨・無料プランあり）</option>
          <option value="openai">OpenAI（有料）</option>
          <option value="local">Local (OpenAI互換サーバー)</option>
        </select>
      </div>

      <div class="form-row">
        <label for="model">🤖 AIモデル</label>
        <select id="model">
          <optgroup label="🆓 無料モデル（OpenRouter）">
            <option value="google/gemma-2-9b-it:free" selected>Google Gemma 2 9B (無料・推奨)</option>
            <option value="microsoft/phi-3-mini-128k-instruct:free">Phi-3 Mini (無料)</option>
          </optgroup>
          <optgroup label="💵 有料モデル（高品質）">
            <option value="openai/gpt-4o-mini">GPT-4o mini (安価)</option>
            <option value="openai/gpt-4o">GPT-4o (高性能)</option>
            <option value="anthropic/claude-3.5-sonnet">Claude 3.5 Sonnet (最高品質)</option>
            <option value="google/gemini-pro-1.5">Gemini Pro 1.5 (バランス型)</option>
          </optgroup>
        </select>
      </div>

      <div class="form-row">
        <label for="temperature">🌡️ 温度</label>
        <input id="temperature" type="number" min="0" max="1" step="0.1" placeholder="0.6" style="width: 100px;">
        <span style="font-size: 11px; color: #666; margin-left: 10px;">0.0～1.0 (推奨: 0.6)</span>
      </div>

      <div class="form-row">
        <label for="apiKey">🔑 APIキー</label>
        <div style="position: relative;">
          <input id="apiKey" type="password" placeholder="OpenRouter: sk-or-... / OpenAI: sk-..." style="width: 100%; padding-right: 45px; font-size: 14px; height: 42px; font-family: 'Courier New', monospace;">
          <button id="toggleApiKey" type="button" style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 20px; padding: 5px 8px; color: #666; transition: color 0.2s;" title="パスワードを表示/非表示">
            👁️
          </button>
        </div>
        <div style="font-size: 12px; color: #666; margin-top: 5px;">
          🔒 APIキーはブラウザ内のローカルストレージ（chrome.storage.local）に安全に保存されます。
        </div>
      </div>

      <div class="button-group">
        <button id="save" class="primary">💾 保存する</button>
        <button id="reload" class="secondary">🔄 再読込</button>
      </div>
    </div>

    <!-- 🔗 Zoom/Meetリンク設定 -->
    <div class="form-section" style="margin-top: 20px;">
      <h2 style="font-size: 16px; color: #1976d2; margin-bottom: 15px;">🔗 ビデオ会議リンク設定</h2>
      <p style="font-size: 13px; color: #666; margin-bottom: 15px; line-height: 1.6;">
        定型文で <code>{{zoom}}</code> や <code>{{meet}}</code> を使うと、自動的にリンクに置き換わります。<br>
        例：「○月○日 14:00でいかがでしょうか？ {{zoom}}」
      </p>

      <div class="form-row">
        <label for="zoomLink">📹 Zoomリンク</label>
        <input id="zoomLink" type="url" placeholder="https://zoom.us/j/あなたのID" style="width: 100%; font-size: 14px; height: 42px;">
        <div style="font-size: 11px; color: #666; margin-top: 5px;">
          定型文で <code>{{zoom}}</code> と書くと、このリンクに置き換わります
        </div>
      </div>

      <div class="form-row">
        <label for="meetLink">📹 Google Meetリンク</label>
        <input id="meetLink" type="url" placeholder="https://meet.google.com/xxx-yyyy-zzz" style="width: 100%; font-size: 14px; height: 42px;">
        <div style="font-size: 11px; color: #666; margin-top: 5px;">
          定型文で <code>{{meet}}</code> と書くと、このリンクに置き換わります
        </div>
      </div>

      <div class="form-row">
        <label for="teamsLink">📹 Microsoft Teamsリンク（オプション）</label>
        <input id="teamsLink" type="url" placeholder="https://teams.microsoft.com/l/meetup-join/..." style="width: 100%; font-size: 14px; height: 42px;">
        <div style="font-size: 11px; color: #666; margin-top: 5px;">
          定型文で <code>{{teams}}</code> と書くと、このリンクに置き換わります
        </div>
      </div>

      <div class="button-group">
        <button id="saveLinks" class="primary">💾 リンクを保存</button>
      </div>
    </div>

    <!-- 🔥 姉妹アプリ -->
    <div class="info-box" style="margin-top: 30px; background: #fff3cd; border-left: 4px solid #ffa000;">
      <h2 style="margin-top: 0; font-size: 18px; color: #f57c00;">🔥 姉妹アプリ</h2>
      <p style="margin-bottom: 10px;">
        🔍 <a href="https://chromewebstore.google.com/detail/%E5%90%9B%E6%96%97%E3%82%8A%E3%82%93%E3%81%8F%E3%81%AEweb%E3%82%B5%E3%82%A4%E3%83%88%E5%81%A5%E5%BA%B7%E8%A8%BA%E6%96%AD-osint-he/hcebljaachgkdfcokcidanmcglflfjbo" target="_blank" style="color: #f57c00; font-weight: bold;">君斗りんくのWEBサイト健康診断 (OSINT Helper)</a>
      </p>
      <p style="font-size: 13px; color: #666; margin: 0;">
        WHOIS検索、証明書確認、IP調査、DNS査詢などのOSINTツールを搭載。セキュリティ調査やドメイン調査に最適！
      </p>
    </div>

    <!-- 📚 サービス説明セクション -->
    <div class="info-box">
      <h2 style="margin-top: 0; font-size: 18px; color: #1565c0;">📚 AI返信サジェストとは？</h2>
      <p>
        <strong>Chatwork・ココナラ・ランサーズ</strong>などのWebサービスで、AIが文脈を読み取り<strong>6パターンの返信文</strong>を自動生成します。
        クリックするだけでテキストエリアに挿入されるので、業務効率が大幅に向上します。
      </p>
      <p style="margin-top: 10px; padding: 10px; background: #e8f5e9; border-radius: 4px; font-size: 13px;">
        🌐 <strong>定型文・履歴機能は、どのWEBサイトでも使えます！</strong>
      </p>
    </div>

    <!-- 🔗 使い方リンク -->
    <div class="info-box">
      <h2 style="margin-top: 0; font-size: 18px; color: #1565c0;">🔗 使い方・ドキュメント</h2>
      <ul style="margin: 10px 0; padding-left: 20px;">
        <li><strong>GitHubリポジトリ</strong> - 🚧 近日公開予定（ソースコードと詳細なREADME）</li>
        <li><a href="https://reverse-re-birth-hack.com" target="_blank"><strong>公式サイト</strong></a> - 開発者情報</li>
        <li><a href="https://openrouter.ai/" target="_blank"><strong>OpenRouter</strong></a> - APIキーの取得（無料プランあり）</li>
        <li><a href="https://reverse-re-birth-hack.com/ai-suggest/privacy-policy.html" target="_blank"><strong>プライバシーポリシー</strong></a> - データ取り扱い</li>
      </ul>
    </div>

    <!-- 💡 詳しい使い方ガイド -->
    <div class="info-box" style="background: #f0fdf4; border-left: 4px solid #10b981;">
      <h2 style="margin-top: 0; font-size: 18px; color: #059669;">💡 詳しい使い方ガイド</h2>
      
      <!-- APIキーの取得方法 -->
      <h3 style="font-size: 16px; color: #047857; margin-top: 20px; padding-bottom: 8px; border-bottom: 2px solid #86efac;">🔑 APIキーの取得方法（無料プランあり）</h3>
      <div style="background: #fff; padding: 15px; border-radius: 8px; margin: 15px 0; border: 1px solid #86efac;">
        <ol style="margin: 0; padding-left: 25px; line-height: 2;">
          <li><a href="https://openrouter.ai/" target="_blank" style="color: #10b981; font-weight: bold;">https://openrouter.ai/</a> にアクセス</li>
          <li>右上の「<strong>Sign Up</strong>」をクリック</li>
          <li><strong>Googleアカウントでログイン</strong></li>
          <li>左メニューの「<strong>Keys</strong>」をクリック</li>
          <li>「<strong>Create Key</strong>」で新しいAPIキーを発行</li>
          <li>この設定画面の「<strong>🔑 APIキー</strong>」欄に貼り付け</li>
          <li>「<strong>💾 保存する</strong>」をクリック</li>
        </ol>
        <div style="margin-top: 15px; padding: 12px; background: #d1fae5; border-radius: 6px;">
          <p style="margin: 0; font-size: 13px; color: #065f46;">
            ✅ <strong>無料プラン（OpenRouter）の制限</strong><br>
            ・APIキー未設定：1日10回まで<br>
            ・APIキー設定済み：無料モデルは制限なし<br>
            ・おすすめモデル：<strong>Google Gemma 2 9B</strong> (無料)
          </p>
        </div>
      </div>

      <!-- 定型文でリンクを使う方法 -->
      <h3 style="font-size: 16px; color: #047857; margin-top: 25px; padding-bottom: 8px; border-bottom: 2px solid #86efac;">🔗 定型文でリンクを使う方法</h3>
      <div style="background: #fff; padding: 15px; border-radius: 8px; margin: 15px 0; border: 1px solid #86efac;">
        <p style="margin: 0 0 10px 0; font-size: 14px; color: #065f46;">
          定型文の内容に以下を書くと、<strong>自動的にリンクに置き換わります</strong>：
        </p>
        <ul style="margin: 10px 0; padding-left: 25px; line-height: 1.8; font-family: 'Courier New', monospace;">
          <li><code style="background: #e5e7eb; padding: 2px 6px; border-radius: 3px;">{{zoom}}</code> → Zoomリンク</li>
          <li><code style="background: #e5e7eb; padding: 2px 6px; border-radius: 3px;">{{meet}}</code> → Google Meetリンク</li>
          <li><code style="background: #e5e7eb; padding: 2px 6px; border-radius: 3px;">{{teams}}</code> → Microsoft Teamsリンク</li>
        </ul>
        <div style="margin-top: 15px; padding: 12px; background: #fef3c7; border-left: 3px solid #fbbf24; border-radius: 4px;">
          <p style="margin: 0 0 8px 0; font-size: 13px; font-weight: bold; color: #78350f;">📝 例：</p>
          <p style="margin: 0; font-size: 13px; color: #78350f; line-height: 1.8;">
            <strong>入力：</strong> 「○月○日 14:00でいかがでしょうか？ <code>{{zoom}}</code>」<br>
            <strong>↓ 自動置き換え</strong><br>
            <strong>出力：</strong> 「○月○日 14:00でいかがでしょうか？ https://zoom.us/j/あなたのID」
          </p>
        </div>
      </div>

      <!-- バックアップと復元 -->
      <h3 style="font-size: 16px; color: #047857; margin-top: 25px; padding-bottom: 8px; border-bottom: 2px solid #86efac;">💾 バックアップと復元の方法</h3>
      <div style="background: #fff; padding: 15px; border-radius: 8px; margin: 15px 0; border: 1px solid #86efac;">
        <div style="margin-bottom: 20px;">
          <h4 style="font-size: 14px; color: #065f46; margin: 0 0 10px 0;">📥 バックアップ方法（3つの方法）</h4>
          <div style="margin-bottom: 15px; padding: 12px; background: #fef3c7; border-left: 3px solid #fbbf24; border-radius: 4px;">
            <p style="margin: 0 0 8px 0; font-size: 13px; font-weight: bold; color: #78350f;">⚡ クイックバックアップ（1クリック）</p>
            <p style="margin: 0; font-size: 13px; color: #78350f; line-height: 1.8;">
              ポップアップ上部の<strong>「💾 今すぐバックアップ（1クリック）」</strong>をクリックするだけ！<br>
              JSON形式で自動保存されます。
            </p>
          </div>
          <ol style="margin: 0; padding-left: 25px; line-height: 1.8;">
            <li>ポップアップを開く</li>
            <li>「<strong>💾 バックアップ</strong>」セクションで「<strong>📥 CSV保存</strong>」または「<strong>📥 JSON保存</strong>」をクリック</li>
            <li>ファイルがダウンロードされます（定型文+履歴）</li>
          </ol>
          <div style="margin-top: 10px; padding: 10px; background: #dbeafe; border-radius: 4px;">
            <p style="margin: 0; font-size: 12px; color: #1e40af;">
              📥 <strong>CSV</strong>：Excelで編集可能、設定情報もコメントで含まれる<br>
              📥 <strong>JSON</strong>：完全復元用（すべてのデータを含む）
            </p>
          </div>
        </div>
        <div>
          <h4 style="font-size: 14px; color: #065f46; margin: 0 0 10px 0;">📤 復元方法</h4>
          <ol style="margin: 0; padding-left: 25px; line-height: 1.8;">
            <li>ポップアップを開く</li>
            <li>「<strong>💾 バックアップ</strong>」セクションの「<strong>📤 復元（CSV/JSON対応）</strong>」をクリック</li>
            <li>バックアップファイル（CSVまたはJSON）を選択</li>
            <li>確認ダイアログで「<strong>OK</strong>」をクリック</li>
          </ol>
          <div style="margin-top: 10px; padding: 10px; background: #fef2f2; border-left: 3px solid #ef4444; border-radius: 4px;">
            <p style="margin: 0; font-size: 12px; color: #991b1b;">
              ⚠️ <strong>重要：</strong>設定情報（APIキー、リンクなど）は<strong>手動で再設定</strong>してください
            </p>
          </div>
        </div>
      </div>

      <!-- トラブルシューティング -->
      <h3 style="font-size: 16px; color: #047857; margin-top: 25px; padding-bottom: 8px; border-bottom: 2px solid #86efac;">🔧 よくある質問（トラブルシューティング）</h3>
      <div style="background: #fff; padding: 15px; border-radius: 8px; margin: 15px 0; border: 1px solid #86efac;">
        <details style="margin-bottom: 10px;">
          <summary style="cursor: pointer; font-weight: bold; padding: 10px; background: #f0fdf4; border-radius: 4px; font-size: 13px; color: #065f46;">
            ❓ AI返信が生成されない
          </summary>
          <div style="padding: 10px; font-size: 13px; color: #333; line-height: 1.8;">
            ✅ <strong>解決方法：</strong><br>
            1. APIキーが正しく入力されているか確認<br>
            2. Chatwork/ココナラ/ランサーズで使用しているか確認<br>
            3. ページをリロードして再度試す<br>
            4. テストモードをONにしてみる
          </div>
        </details>
        <details style="margin-bottom: 10px;">
          <summary style="cursor: pointer; font-weight: bold; padding: 10px; background: #f0fdf4; border-radius: 4px; font-size: 13px; color: #065f46;">
            ❓ テキストエリアに挿入できない
          </summary>
          <div style="padding: 10px; font-size: 13px; color: #333; line-height: 1.8;">
            ✅ <strong>解決方法：</strong><br>
            1. テキストボックスをクリックしてフォーカスを当てる<br>
            2. ページをリロードして再度試す<br>
            3. 自動でクリップボードにコピーされるので、Ctrl+Vで貼り付け
          </div>
        </details>
        <details style="margin-bottom: 10px;">
          <summary style="cursor: pointer; font-weight: bold; padding: 10px; background: #f0fdf4; border-radius: 4px; font-size: 13px; color: #065f46;">
            ❓ データが消えた
          </summary>
          <div style="padding: 10px; font-size: 13px; color: #333; line-height: 1.8;">
            ✅ <strong>解決方法：</strong><br>
            1. 拡張機能を削除した場合は、バックアップから復元する<br>
            2. 通常はデータが消えることはありません<br>
            3. 定期的にバックアップを取ることをおすすめします
          </div>
        </details>
      </div>
    </div>

    <!-- ⚙️ 主要機能 -->
    <div class="info-box">
      <h2 style="margin-top: 0; font-size: 18px; color: #1565c0;">⚙️ 主要機能</h2>
      
      <h3 style="font-size: 15px; color: #1976d2; margin-top: 15px;">🚀 AI返信生成（Chatwork/ココナラ/ランサーズ対応）</h3>
      <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.8;">
        <li><strong>6パターン返信生成</strong>
          <ul style="margin-top: 5px;">
            <li>短い：丁寧・簡潔・フレンドリー (15文字以内)</li>
            <li>長い：丁寧・簡潔・フレンドリー (30-50文字)</li>
          </ul>
        </li>
        <li><strong>自動メッセージ抽出</strong> - Chatwork・ココナラ・ランサーズのメッセージを自動検出</li>
        <li><strong>ワンクリック挿入</strong> - 生成した返信をクリックでテキストエリアに挿入</li>
      </ul>

      <h3 style="font-size: 15px; color: #1976d2; margin-top: 15px;">🌐 定型文・履歴機能（どのWEBサイトでも使えます）</h3>
      <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.8;">
        <li><strong>📋 定型文機能</strong>
          <ul style="margin-top: 5px; font-size: 13px;">
            <li>よく使う返信を保存・検索・一発挿入</li>
            <li>🎯 <strong>ドラッグ&ドロップで並び替え</strong>：自由に順番を変更可能</li>
            <li>💬 <strong>マウスオーバーで全文表示</strong>：ツールチップでタイトル+全文を確認</li>
            <li>🔗 <strong>プレースホルダー対応</strong>：{{zoom}}, {{meet}}, {{teams}}で会議リンク自動挿入</li>
          </ul>
        </li>
        <li><strong>🕒 履歴機能</strong>
          <ul style="margin-top: 5px; font-size: 13px;">
            <li>コピーしたテキストを自動保存（最大30件、24時間）</li>
            <li>左クリック：テキストエリアに挿入</li>
            <li>右クリック：定型文として保存</li>
            <li>🎯 <strong>ドラッグ&ドロップで並び替え</strong>：よく使う履歴を上に移動</li>
            <li>🔄 <strong>履歴→定型文へドラッグ</strong>：履歴を定型文エリアにドロップで即保存！</li>
            <li>💬 <strong>マウスオーバーで全文表示</strong>：ツールチップで日時+全文を確認</li>
          </ul>
        </li>
        <li><strong>📋 システムクリップボード連携</strong> - VSCode・秀丸・EmEditor等でコピーしたテキストも履歴に追加</li>
        <li><strong>💾 バックアップ・復元</strong> - CSV/JSONエクスポート・インポート対応（自動判別）</li>
        <li><strong>Gmail・Slack・Discord等でも利用可能</strong> - 実質すべてのWEBサイトで使えます！</li>
      </ul>

      <h3 style="font-size: 15px; color: #1976d2; margin-top: 15px;">🔒 その他の機能</h3>
    </div>

    <!-- 🔒 プライバシーとデータ保存 -->
    <div id="dataInfo" class="info-box" style="scroll-margin-top: 20px;">
      <h2 style="margin-top: 0; font-size: 18px; color: #1565c0;">📝 定型文やコピペ履歴のデータについて</h2>
      
      <div style="background: #fff3cd; padding: 12px; border-radius: 6px; margin: 15px 0; border-left: 4px solid #ffa000;">
      </div>

      <h3 style="font-size: 15px; color: #1976d2; margin-top: 20px;">📁 データの保存場所</h3>
      <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.8;">
        <li><strong>定型文</strong> → <code>chrome.storage.local</code>（端末内、大容量）</li>
        <li><strong>コピペ履歴</strong> → <code>chrome.storage.local</code>（端末内）</li>
        <li><strong>設定（APIキー等）</strong> → <code>chrome.storage.sync</code>（Googleアカウントで同期）</li>
      </ul>
      <p style="font-size: 13px; color: #666; margin: 10px 0 10px 20px; padding: 10px; background: #f0f9ff; border-radius: 4px;">
        🔒 <strong>すべてブラウザ内に安全に保存</strong>され、外部サーバーには一切送信されません。
      </p>

      <h3 style="font-size: 15px; color: #1976d2; margin-top: 20px;">❓ データはいつ消えるの？</h3>
      <table style="width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 13px;">
        <thead>
          <tr style="background: #e3f2fd;">
            <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">操作</th>
            <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">データの状態</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding: 10px; border: 1px solid #ddd;">✅ ポップアップを閉じたとき</td>
            <td style="padding: 10px; border: 1px solid #ddd; background: #f0fdf4;"><strong>残ります</strong>（正常）</td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid #ddd;">✅ 拡張機能をリロードしたとき</td>
            <td style="padding: 10px; border: 1px solid #ddd; background: #f0fdf4;"><strong>残ります</strong>（正常）</td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid #ddd;">✅ ブラウザを再起動したとき</td>
            <td style="padding: 10px; border: 1px solid #ddd; background: #f0fdf4;"><strong>残ります</strong>（正常）</td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid #ddd;">⚠️ 拡張機能を削除（アンインストール）したとき</td>
            <td style="padding: 10px; border: 1px solid #ddd; background: #fee2e2;"><strong>すべて削除されます</strong></td>
          </tr>
        </tbody>
      </table>
      <p style="font-size: 13px; color: #ef4444; margin: 10px 0 10px 20px; padding: 10px; background: #fef2f2; border-radius: 4px; border-left: 3px solid #ef4444;">
        ⚠️ <strong>重要：</strong> 拡張機能を削除すると、定型文・履歴・設定がすべて削除されます。<br>
        <strong>削除前に必ずバックアップを取ってください！</strong>
      </p>

      <h3 style="font-size: 15px; color: #1976d2; margin-top: 20px;">💾 バックアップ方法</h3>
      <ol style="margin: 10px 0; padding-left: 20px; line-height: 1.8;">
        <li>ポップアップを開く</li>
        <li>右下の「⚙️設定」→「💾データ保存」をクリック</li>
        <li>JSONファイルがダウンロードされます（定型文+履歴）</li>
      </ol>
      <p style="font-size: 13px; color: #666; margin: 10px 0 10px 20px; padding: 10px; background: #e8f5e9; border-radius: 4px;">
        ✅ バックアップファイルから「💾データ復元」で簡単に復元できます！
      </p>

      <h3 style="font-size: 15px; color: #1976d2; margin-top: 20px;">🔒 プライバシー保護</h3>
      <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.8;">
        <li><strong>個人情報の収集なし</strong> - いかなる個人情報も収集しません</li>
        <li><strong>データの外部送信なし</strong> - AI API以外への送信は行いません</li>
        <li><strong>完全ローカル保存</strong> - すべてブラウザ内に保存（外部サーバーなし）</li>
        <li><strong>暗号化通信</strong> - AI APIとの通信はHTTPS（SSL/TLS）で暗号化</li>
      </ul>
    </div>

    <!-- 📊 使用制限 -->
    <div class="info-box">
      <h2 style="margin-top: 0; font-size: 18px; color: #1565c0;">📊 使用制限</h2>
      <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.8;">
        <li><strong>無料版 (APIキーなし)</strong> - 1日に5回まで生成可能</li>
        <li><strong>有料版 (APIキーあり)</strong> - 制限なし（APIプロバイダーの制限に準じる）</li>
        <li><strong>テストモード</strong> - 制限なし（開発・テスト用）</li>
      </ul>
    </div>

    <!-- 📩 バグ報告・機能要望 -->
    <div class="info-box" style="background: #f0fdf4; border-left: 4px solid #22c55e;">
      <h2 style="margin-top: 0; font-size: 18px; color: #166534;">📩 バグ報告・機能要望</h2>
      <p style="margin-bottom: 15px;">
        気軽にご連絡ください！開発者が直接対応します。
      </p>
      <div style="text-align: center; margin: 15px 0;">
        <a href="https://lin.ee/8rCNRW9" target="_blank" style="display:inline-block; padding:12px 24px; background:#22c55e; color:#fff; text-decoration:none; border-radius:8px; font-size:15px; font-weight:bold; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: background 0.2s;">
          💬 LINEで連絡する
        </a>
      </div>
      <p style="font-size: 13px; color: #666; margin-top: 15px; text-align: center;">
        開発者：<strong>君斗りんく</strong><br>
        メール：<a href="mailto:info@reverse-re-birth-hack.com" style="color: #166534;">info@reverse-re-birth-hack.com</a>
      </p>
    </div>

    <!-- 🆕 新機能（v6.4.0） -->
    <div class="info-box" style="background: #fef3c7; border-left: 4px solid #fbbf24;">
      <h2 style="margin-top: 0; font-size: 18px; color: #f59e0b;">🆕 新機能（v6.4.0）</h2>
      <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.8;">
        <li>🎯 <strong>履歴→定型文へのドラッグ&ドロップ</strong> - 履歴を定型文エリアにドロップするだけで即保存！</li>
        <li>🎯 <strong>履歴・定型文の並び替え</strong> - ドラッグ&ドロップで自由に順番を変更可能</li>
        <li>💬 <strong>マウスオーバーでツールチップ表示</strong> - 履歴：日時+全文、定型文：タイトル+全文</li>
        <li>⚠️ <strong>バックアップ警告バナー</strong> - 最終バックアップ日時を表示（7日以上経過で警告）</li>
        <li>💾 <strong>CSV/JSONエクスポート・インポート</strong> - ファイル形式を自動判別して復元</li>
        <li>📋 <strong>システムクリップボード自動取得</strong> - VSCode、秀丸、EmEditor対応</li>
        <li>📅 <strong>日程調整機能</strong> - 日程提案文を自動生成（Zoom/Meetリンク付き）</li>
        <li>🔗 <strong>プレースホルダー機能</strong> - {{zoom}}, {{meet}}, {{teams}}で会議リンク自動挿入</li>
      </ul>
    </div>

    <!-- バージョン情報 -->
    <div style="text-align: center; padding: 20px; color: #999; font-size: 12px;">
      君斗りんくのAI返信サジェスト[定型文・履歴機能付き] v6.4.0 | &copy; 2025 君斗りんく | MIT License
    </div>
  </main>

  <script src="options.js"></script>
</body>
</html>