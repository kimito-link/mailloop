# BetterBugs 使用ガイド

## ログイン後の使い方

### 基本的なバグ報告の流れ

1. **問題が発生したページに移動**
   - 例: `https://resend.kimito-link.com/send`
   - 認証ループが発生しているページ
   - 403エラーが発生しているページ

2. **BetterBugs拡張機能を起動**
   - ブラウザのツールバーにあるBetterBugsアイコンをクリック
   - または、オーバーレイが表示されている場合はそのまま使用

3. **キャプチャモードを選択**
   - **Snapshot** タブ:
     - **Crop & Capture**: 選択範囲をキャプチャ（推奨）
     - **Visible screen**: 表示されている画面全体をキャプチャ
     - **Full Page**: ページ全体をキャプチャ（スクロールが必要な場合）
   - **Record screen** タブ: 動的な問題を録画

4. **スクリーンショットを撮影**
   - 「Crop & Capture」を選択
   - キャプチャしたい領域をドラッグして選択
   - 自動でキャプチャされる

5. **アノテーションを追加**
   - 矢印、図形、テキスト、ハイライトなどで注釈
   - 問題箇所を明確に示す

6. **バグの詳細を入力**
   - **タイトル**（必須）: バグの簡潔な説明
   - **説明**: 詳細な説明
   - **再現手順**: 手動入力、またはAIで自動生成
   - **技術情報**: コンソールログ、ネットワークリクエストなどは自動で添付

7. **アップロード**
   - 「Upload Bug Details」ボタンをクリック
   - レポートが「Info's Project」に保存される
   - レポートのリンクがクリップボードにコピーされる

## 現在の403エラー調査での活用例

### 1. 認証ループの問題を報告

**手順:**
1. 認証ループが発生しているページ（`/send`など）に移動
2. BetterBugs拡張機能を起動
3. 「Crop & Capture」で問題箇所をキャプチャ
4. アノテーションで「require_login user missing id」のログをハイライト
5. タイトル: `認証ループが発生 - require_loginでユーザーIDが見つからない`
6. 説明:
   ```
   認証ループが発生しています。
   - require_loginでユーザーが見つかった後、すぐに「user missing id」が発生
   - セッションディレクトリ /tmp/mailloop_sessions/ は作成済み
   - セッションファイルが作成されていない可能性
   ```
7. アップロード

**自動で添付される情報:**
- コンソールログ（`require_login`関連のログ）
- ネットワークリクエスト
- システム情報

### 2. 403エラーのログを報告

**手順:**
1. サーバー側のターミナルでログを表示
2. BetterBugsで「Visible screen」を選択してキャプチャ
3. 重要なログ行をハイライト
4. タイトル: `403エラーログ - Gmail API呼び出し時の権限不足`
5. 説明:
   ```
   サーバー側のログを確認しました。
   - 認証ループが発生し、403エラーログまで到達していない
   - セッションディレクトリの問題が原因の可能性
   ```
6. アップロード

### 3. セッション管理の問題を報告

**手順:**
1. `/dbg`エンドポイントにアクセス
2. BetterBugsで「Full Page」を選択してキャプチャ
3. セッション情報をハイライト
4. タイトル: `セッションディレクトリの問題 - /tmp/mailloop_sessions/が存在しない`
5. 説明:
   ```
   セッションディレクトリが存在しないことが判明。
   - mkdir -p /tmp/mailloop_sessions で作成済み
   - 権限は 700 に設定済み
   - セッションファイルが作成されていない
   ```
6. アップロード

## BetterBugsの便利な機能

### AI機能の活用

1. **説明の自動生成**
   - スクリーンショットをアップロード後、AIが説明を自動生成
   - 「Generate with AI」ボタンをクリック

2. **再現手順の自動生成**
   - AIが再現手順を自動で生成
   - 手動で入力する手間を削減

### プロジェクト管理

1. **プロジェクトの作成**
   - 左サイドバーの「Projects」セクションで「+」をクリック
   - 新しいプロジェクトを作成

2. **レポートの整理**
   - プロジェクトごとにレポートを分類
   - 検索機能でレポートを検索

### 共有機能

1. **レポートのリンクを共有**
   - アップロード後、リンクがクリップボードにコピーされる
   - チームメンバーと共有

2. **コメント機能**
   - レポートにコメントを追加
   - チーム内で議論

## トラブルシューティング

### リンクがクリックできない問題

もし再度リンクがクリックできなくなった場合：

1. **BetterBugsを一時的に無効化**
   - `chrome://extensions/` でBetterBugsをOFF
   - 作業を続行

2. **バグ報告時のみ有効化**
   - 報告が必要な時だけON
   - 報告後、OFF

### スクリーンショットが撮影できない場合

1. **ページの権限を確認**
   - 一部のページではスクリーンショットが制限される場合がある

2. **ブラウザを再起動**
   - 拡張機能が正しく動作しない場合

3. **拡張機能を再インストール**
   - 問題が解決しない場合

## 次のステップ

1. **テストレポートを作成**
   - 現在の403エラー調査でBetterBugsを使用
   - 認証ループの問題を報告

2. **チームと共有**
   - レポートのリンクを共有
   - 効率的なコミュニケーションを実現

3. **ワークフローを確立**
   - バグ発見 → BetterBugsで報告 → チームと共有
   - 「スクリーンショットを貼り付けて『これどうですか？』と聞く」作業を削減

## 参考リンク

- [BetterBugsドキュメント](https://docs.betterbugs.io/)
- [クイックスタートガイド](https://docs.betterbugs.io/getting-started/reporting-your-first-bug)
- [BetterBugsダッシュボード](https://app.betterbugs.io/)
