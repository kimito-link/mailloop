<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="ã‚†ã£ãã‚Šå®Ÿæ³å‹•ç”»ç”¨ã®å°æœ¬ã‚’ç°¡å˜ã«ä½œæˆã§ãã‚‹Webãƒ„ãƒ¼ãƒ«ã€‚æ–‡ç« ã‚’è‡ªç„¶ãªä¼šè©±å½¢å¼ã«å¤‰æ›ã—ã€ã‚«ã‚¹ã‚¿ãƒ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã«ã‚‚å¯¾å¿œã€‚">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="format-detection" content="telephone=no">
    <meta name="keywords" content="ã‚†ã£ãã‚Š,å°æœ¬,å®Ÿæ³,å‹•ç”»,å¤‰æ›ãƒ„ãƒ¼ãƒ«,ã‚†ã£ãã‚ŠMovieMaker">
    <meta name="author" content="Yukkuri Script Tool">
    
    <title>å›æ–—ã‚Šã‚“ãã®ã‚†ã£ãã‚Šãƒ¡ãƒ¼ã‚«ãƒ¼ - èª°ã‚‚ãŒã‚†ã£ãã‚Šè§£èª¬ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã«</title>
    
    <!-- Open Graph / Twitter -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="å›æ–—ã‚Šã‚“ãã®ã‚†ã£ãã‚Šãƒ¡ãƒ¼ã‚«ãƒ¼">
    <meta property="og:description" content="èª°ã‚‚ãŒã‚†ã£ãã‚Šè§£èª¬ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã«ï¼è‰¯ã„å°æœ¬ã‚’æŠ•ç¨¿ã—ã¦ãã‚ŒãŸã‚‰å‹•ç”»åˆ¶ä½œã®å£°ãŒã‹ã‹ã‚‹ã‹ã‚‚ï¼Ÿå›æ–—ã‚Šã‚“ã@ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼å¿œæ´ãŒé‹å–¶">
    <meta property="og:url" content="https://yukkuri-kaisetu-talk-generator.com/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@streamerfunch">
    <meta name="twitter:creator" content="@streamerfunch">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="images/link/link-normal.png">
    <link rel="shortcut icon" type="image/png" href="images/link/link-normal.png">
    <link rel="apple-touch-icon" href="images/link/link-normal.png">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/main.css">
    <style>
        /* ãƒªã‚»ãƒƒãƒˆã¨ãƒ™ãƒ¼ã‚¹è¨­å®š */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
        }
        
        html {
            font-size: 16px;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }
        
        body {
            font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* ãƒ•ãƒ¬ãƒƒã‚¯ã‚¹ãƒœãƒƒã‚¯ã‚¹ã®ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ */
        .flex-container {
            display: -webkit-box;
            display: -webkit-flex;
            display: -moz-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-flex-wrap: wrap;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç”»åƒ */
        img {
            max-width: 100%;
            height: auto;
            display: block;
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å‹•ç”»åŸ‹ã‚è¾¼ã¿ */
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
        }
        
        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆè¨­è¨ˆ */
        @media screen and (max-width: 767px) {
            html {
                font-size: 14px;
            }
            
            .container {
                padding: 0 10px;
            }
            
            /* ãƒ˜ãƒƒãƒ€ãƒ¼ã®ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
            .creator-header {
                padding: 10px !important;
            }
            
            .creator-header h1 {
                font-size: 1.2rem !important;
            }
            
            .creator-header p {
                display: none !important;
            }
            
            .creator-header a {
                font-size: 0.75rem !important;
                padding: 5px 8px !important;
            }
            
            /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚°ãƒªãƒƒãƒ‰ */
            .yahoo-style-layout {
                grid-template-columns: 1fr !important;
            }
            
            /* å‹•ç”»ã‚°ãƒªãƒƒãƒ‰ */
            .video-grid {
                grid-template-columns: 1fr !important;
            }
            
            /* ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ */
            textarea {
                font-size: 16px !important; /* iOSã®ã‚ºãƒ¼ãƒ é˜²æ­¢ */
            }
            
            /* ãƒœã‚¿ãƒ³ */
            button, .button, a[class*="btn"] {
                width: 100%;
                margin: 5px 0;
            }
        }
        
        /* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ */
        @media screen and (min-width: 768px) and (max-width: 1023px) {
            .container {
                padding: 0 20px;
            }
            
            .yahoo-style-layout {
                grid-template-columns: 1fr !important;
            }
            
            .video-grid {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }
        
        /* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— */
        @media screen and (min-width: 1024px) {
            .container {
                padding: 0 30px;
            }
        }
        
        /* å¤§ç”»é¢ */
        @media screen and (min-width: 1440px) {
            html {
                font-size: 18px;
            }
            
            .container {
                max-width: 1600px;
            }
        }
        
        /* ãƒ—ãƒªãƒ³ãƒˆå¯¾å¿œ */
        @media print {
            .creator-header,
            .video-showcase-section,
            .export-section {
                display: none !important;
            }
        }
        
        /* ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ */
        :focus {
            outline: 2px solid #764ba2;
            outline-offset: 2px;
        }
        
        /* ã‚¹ãƒ ãƒ¼ã‚¹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
        html {
            scroll-behavior: smooth;
        }
        
        /* ã‚»ãƒ¼ãƒ•ã‚¨ãƒªã‚¢å¯¾å¿œï¼ˆiPhone Xä»¥é™ï¼‰ */
        @supports (padding: env(safe-area-inset-top)) {
            .container {
                padding-left: calc(15px + env(safe-area-inset-left));
                padding-right: calc(15px + env(safe-area-inset-right));
            }
        }
        /* ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¡¨ç¤º */
        .user-profile-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .news-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .news-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        
        .news-logo-icon {
            font-size: 28px;
            color: #764ba2;
        }
        
        .user-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .user-info-display {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            background: #f8f8f8;
            border-radius: 20px;
        }
        
        .user-avatar-small {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .user-details {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        
        .user-display-name {
            font-size: 14px;
            font-weight: bold;
            color: #333;
            line-height: 1.2;
        }
        
        .user-name-small {
            font-size: 13px;
            color: #666;
            line-height: 1.2;
        }
        
        .user-followers {
            font-size: 12px;
            color: #666;
            line-height: 1.2;
            margin-top: 2px;
        }
        
        .logout-btn {
            padding: 8px 15px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .logout-btn:hover {
            background: #c82333;
        }
        
        .login-btn {
            padding: 8px 20px;
            background: #1DA1F2;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .login-btn:hover {
            background: #1a8cd8;
        }
        
        .create-article-section {
            margin-top: 20px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
        }
        
        .create-article-btn {
            padding: 12px 30px;
            background: #6366f1;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .create-article-btn:hover {
            background: #5558e3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
        }
        
        .delete-all-btn {
            padding: 8px 15px;
            background: white;
            color: #666;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            margin-left: 10px;
        }
        
        .delete-all-btn:hover {
            background: #f8f8f8;
            border-color: #999;
        }
        
        .no-articles-message {
            text-align: center;
            color: #999;
            font-size: 14px;
            padding: 40px;
        }
        
        .sort-section {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 10px;
            margin-bottom: 15px;
        }
        
        .sort-btn {
            padding: 6px 12px;
            background: white;
            color: #666;
            border: 1px solid #ddd;
            border-radius: 15px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .sort-btn.active {
            background: #764ba2;
            color: white;
            border-color: #764ba2;
        }
        
        .sort-btn:hover:not(.active) {
            background: #f8f8f8;
            border-color: #999;
        }
        
        /* å°æœ¬å±¥æ­´ãƒªã‚¹ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .script-history-item {
            transition: all 0.2s ease;
        }
        
        .script-history-item:hover {
            background: #f8f9fa;
            padding-left: 20px !important;
        }
        
        .script-history-item:active {
            background: #e9ecef !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼å¿œæ´ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="creator-header" style="background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%); padding: 15px 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px; border-radius: 0;">
            <div class="header-wrapper" style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                <div class="header-brand" style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                    <h1 style="margin: 0; font-size: clamp(1rem, 4vw, 1.5rem); font-weight: bold; color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); white-space: nowrap;">
                        ğŸ¬ å›æ–—ã‚Šã‚“ãã®ã‚†ã£ãã‚Šãƒ¡ãƒ¼ã‚«ãƒ¼
                    </h1>
                    <p class="header-tagline" style="margin: 0; color: white; font-size: clamp(0.75rem, 2vw, 0.875rem);">èª°ã‚‚ãŒã‚†ã£ãã‚Šè§£èª¬ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã«ï¼</p>
                </div>
                <nav class="header-nav" style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                    <a href="https://www.youtube.com/@streamerfunch" target="_blank" style="color: white; text-decoration: none; font-size: clamp(0.7rem, 2vw, 0.875rem); display: inline-flex; align-items: center; gap: 5px; background: rgba(255,255,255,0.2); padding: 6px 12px; border-radius: 20px; white-space: nowrap;">
                        <span style="font-size: 1em;">ğŸ“º</span> <span class="nav-text">é…ä¿¡è€…å¿œæ´ch</span>
                    </a>
                    <a href="https://www.youtube.com/@idolfunch" target="_blank" style="color: white; text-decoration: none; font-size: clamp(0.7rem, 2vw, 0.875rem); display: inline-flex; align-items: center; gap: 5px; background: rgba(255,255,255,0.2); padding: 6px 12px; border-radius: 20px; white-space: nowrap;">
                        <span style="font-size: 1em;">ğŸŒŸ</span> <span class="nav-text">ã‚¢ã‚¤ãƒ‰ãƒ«å¿œæ´ch</span>
                    </a>
                    <a href="https://twitter.com/streamerfunch" target="_blank" style="color: white; text-decoration: none; font-size: clamp(0.7rem, 2vw, 0.875rem); display: inline-flex; align-items: center; gap: 5px; background: rgba(255,255,255,0.2); padding: 6px 12px; border-radius: 20px; white-space: nowrap;">
                        <span style="font-size: 1em;">ğŸ¦</span> <span class="nav-text">@streamerfunch</span>
                    </a>
                </nav>
                <div class="user-actions" id="userActions" style="display: flex; align-items: center;">
                    <!-- Twitterãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã«å¿œã˜ã¦è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ -->
                </div>
            </div>
        </header>

        <!-- ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼å¿œæ´ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
        <div class="creator-message-section" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; padding: 30px; margin-bottom: 30px; text-align: center; color: white;">
            <h2 style="font-size: 28px; margin-bottom: 15px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2);">
                ğŸŒŸ èª°ã‚‚ãŒã‚†ã£ãã‚Šè§£èª¬ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã«ãªã‚Œã‚‹ï¼ ğŸŒŸ
            </h2>
            <p style="font-size: 16px; margin-bottom: 20px; line-height: 1.8;">
                ã“ã®ãƒ„ãƒ¼ãƒ«ã§ä½œæˆã—ãŸå°æœ¬ã«è‰¯ã„ã‚‚ã®ãŒã‚ã‚Œã°<br>
                <strong style="font-size: 18px;">å®Ÿéš›ã«å‹•ç”»ã‚’ä½œæˆã•ã›ã¦é ‚ãã¾ã™ï¼</strong><br>
                çš†ã•ã‚“ã®æŠ•ç¨¿ã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™ã€‚
            </p>
            <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                <div style="background: rgba(255,255,255,0.2); padding: 15px 25px; border-radius: 10px;">
                    <span style="font-size: 24px;">âœï¸</span><br>
                    <span style="font-size: 14px;">å°æœ¬ã‚’ä½œæˆ</span>
                </div>
                <div style="background: rgba(255,255,255,0.2); padding: 15px 25px; border-radius: 10px;">
                    <span style="font-size: 24px;">ğŸ“¤</span><br>
                    <span style="font-size: 14px;">æŠ•ç¨¿ã™ã‚‹</span>
                </div>
                <div style="background: rgba(255,255,255,0.2); padding: 15px 25px; border-radius: 10px;">
                    <span style="font-size: 24px;">ğŸ¬</span><br>
                    <span style="font-size: 14px;">å‹•ç”»åŒ–ãƒãƒ£ãƒ³ã‚¹ï¼</span>
                </div>
            </div>
        </div>

        <!-- Yahooãƒ‹ãƒ¥ãƒ¼ã‚¹é¢¨ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
        <div class="yahoo-style-layout" style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 30px;">
            <!-- å·¦å´ï¼šãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ãƒªã‚¹ãƒˆ -->
            <div class="news-main-column">
                <!-- ãƒˆãƒƒãƒ—ãƒ‹ãƒ¥ãƒ¼ã‚¹ -->
                <div class="top-news-card" style="background: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <!-- ä¸¦ã³æ›¿ãˆã‚¿ãƒ– -->
                    <div class="sort-section" style="display: flex; gap: 10px; align-items: center; margin-bottom: 15px;">
                        <span style="font-size: 13px; color: #666;">ä¸¦ã³æ›¿ãˆ:</span>
                        <button class="sort-btn active" onclick="sortScripts('recent')" id="sortRecent" style="padding: 6px 12px; background: #6366f1; color: white; border: none; border-radius: 15px; font-size: 13px; cursor: pointer;">æ–°ã—ã„é †</button>
                        <button class="sort-btn" onclick="sortScripts('popular')" id="sortPopular" style="padding: 6px 12px; background: white; color: #666; border: 1px solid #ddd; border-radius: 15px; font-size: 13px; cursor: pointer;">ã‚¢ã‚¯ã‚»ã‚¹é †</button>
                        <button class="sort-btn" onclick="sortScripts('comments')" id="sortComments" style="padding: 6px 12px; background: white; color: #666; border: 1px solid #ddd; border-radius: 15px; font-size: 13px; cursor: pointer;">ã‚³ãƒ¡ãƒ³ãƒˆé †</button>
                    </div>
                    
                    <h2 style="color: #d32f2f; font-size: 20px; margin-bottom: 15px; border-bottom: 2px solid #d32f2f; padding-bottom: 10px;">ğŸ¬ æœ€è¿‘ä½œæˆã•ã‚ŒãŸã‚†ã£ãã‚Šå°æœ¬</h2>
                    
                    <!-- æœ€è¿‘ä½œæˆã•ã‚ŒãŸå°æœ¬ãƒªã‚¹ãƒˆ -->
                    <div id="scriptHistoryList" style="display: none;">
                        <!-- å°æœ¬ãƒªã‚¹ãƒˆãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
                    </div>
                    
                    <!-- å°æœ¬ãŒãªã„å ´åˆã®è¡¨ç¤º -->
                    <div id="noScriptsMessage" style="text-align: center; padding: 60px 20px; color: #999;">
                        <div style="font-size: 48px; margin-bottom: 20px;">ğŸ¬</div>
                        <p style="font-size: 16px; margin-bottom: 20px;">ã¾ã å°æœ¬ãŒä½œæˆã•ã‚Œã¦ã„ã¾ã›ã‚“</p>
                        <p style="font-size: 14px; color: #666;">ä¸‹ã®å…¥åŠ›æ¬„ã«æ–‡ç« ã‚’å…¥åŠ›ã—ã¦ã€ã€Œã‚†ã£ãã‚Šå°æœ¬ã«å¤‰æ›ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</p>
                    </div>
                </div>
            </div>
            
            <!-- å³å´ï¼šã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
            <aside class="news-sidebar">
                <!-- ãƒ©ãƒ³ã‚­ãƒ³ã‚° -->
                <div class="ranking-section" style="background: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <h3 style="color: #ff6b6b; font-size: 16px; margin-bottom: 15px; border-bottom: 2px solid #ff6b6b; padding-bottom: 8px;">
                        ğŸ”¥ ã‚¢ã‚¯ã‚»ã‚¹ãƒ©ãƒ³ã‚­ãƒ³ã‚°
                    </h3>
                    <ol id="rankingList" style="padding-left: 20px; margin: 0;">
                        <!-- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãŒã“ã“ã«å‹•çš„ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
                    </ol>
                </div>
            </aside>
        </div>
            
        </div>
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="header">
            <div class="header-content">
                <img src="images/link/link-normal.png" alt="å›æ–—ã‚Šã‚“ã" class="header-icon">
                <div class="header-text">
                    <h1><span class="highlight-kimito">å›æ–—ã‚Šã‚“ã</span>ã®ã‚†ã£ãã‚Šå°æœ¬ä½œæˆãƒ„ãƒ¼ãƒ«</h1>
                    <p>æ–‡ç« ã‚’ã‚†ã£ãã‚Šå®Ÿæ³ã‚¹ã‚¿ã‚¤ãƒ«ã«å¤‰æ›ãƒ»ã‚«ã‚¹ã‚¿ãƒ ã‚­ãƒ£ãƒ©å¯¾å¿œãƒ»AIæ”¯æ´æ©Ÿèƒ½ä»˜ã</p>
                </div>
            </div>
            <div class="header-buttons">
                <button class="header-btn active" onclick="window.location.href='./'">ğŸ  ãƒ›ãƒ¼ãƒ </button>
                <button class="header-btn" onclick="window.location.href='pages/guide/'">ğŸ“š ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</button>
                <button class="header-btn" onclick="window.location.href='pages/log/'">ğŸ“Š ãƒ­ã‚°ç¢ºèª</button>
                <button class="header-btn" onclick="window.location.href='pages/settings/'">âš™ï¸ è¨­å®š</button>
            </div>
        </header>
        
        <!-- ãƒ‘ãƒƒã‚¯ãƒãƒ³é¢¨è¿½ã„ã‹ã‘ã£ã“ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <div class="pacman-chase-container">
            <div class="chase-track">
                <div class="chase-character" id="chase-link">
                    <img src="images/link/link-normal.png" alt="å›æ–—ã‚Šã‚“ã">
                    <div class="emoji-bubble" id="bubble-link">
                        <span>(ï½€ï½¥Ï‰ï½¥Â´)</span>
                    </div>
                </div>
                <div class="chase-character" id="chase-tanunee">
                    <img src="images/tanunee/tanuki-yukkuri-normal-mouth-closed.png" alt="ãŸã¬ã­ãˆ">
                    <div class="emoji-bubble" id="bubble-tanunee">
                        <span>(ï¼ï¼œ)</span>
                    </div>
                </div>
                <div class="chase-character" id="chase-konta">
                    <img src="images/konta/kitsune-yukkuri-normal.png" alt="ã“ã‚“ãŸ">
                    <div class="emoji-bubble" id="bubble-konta">
                        <span>( ï¾ŸĞ”ï¾Ÿ)</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ã‚¿ãƒ– -->
        <nav class="tabs" role="tablist">
            <button class="tab-btn active" role="tab" aria-selected="true" onclick="switchTab('convert')">
                ğŸ“ å¤‰æ›ãƒ¢ãƒ¼ãƒ‰
            </button>
            <button class="tab-btn" role="tab" aria-selected="false" onclick="switchTab('create')">
                ğŸ’¬ ä½œæˆãƒ¢ãƒ¼ãƒ‰
            </button>
            <button class="tab-btn" role="tab" aria-selected="false" onclick="switchTab('custom')">
                ğŸ¨ ã‚«ã‚¹ã‚¿ãƒ è¨­å®š
            </button>
        </nav>
        
        <!-- å¤‰æ›ãƒ¢ãƒ¼ãƒ‰ã‚¿ãƒ– -->
        <div id="convert-tab" class="tab-content active" role="tabpanel">
            <!-- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç´¹ä»‹ -->
            <section class="character-section">
                <h2 class="section-title">
                    <span>ğŸ‘¥</span>
                    <span>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç´¹ä»‹</span>
                    <span style="font-size: 14px; color: #666; margin-left: 10px;">ï¼ˆè‡ªå‹•ã§å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¾ã™ï¼‰</span>
                </h2>
                <div class="character-intro" style="background: #f9f9f9; padding: 20px; border-radius: 10px;">
                    <div style="display: flex; gap: 30px; justify-content: center; flex-wrap: wrap;">
                        <!-- ãŸã¬ã­ãˆç´¹ä»‹ -->
                        <div style="text-align: center;">
                            <img src="images/tanunee/tanuki-yukkuri-normal-mouth-closed.png" 
                                 alt="ãŸã¬ã­ãˆ" 
                                 style="width: 80px; height: 80px;">
                            <div style="font-weight: bold; margin-top: 10px;">ãŸã¬ã­ãˆ</div>
                            <div style="font-size: 12px; color: #666;">å„ªã—ã„ãŠå§‰ã•ã‚“</div>
                        </div>
                        
                        <!-- ã“ã‚“ãŸç´¹ä»‹ -->
                        <div style="text-align: center;">
                            <img src="images/konta/kitsune-yukkuri-normal.png" 
                                 alt="ã“ã‚“ãŸ" 
                                 style="width: 80px; height: 80px;">
                            <div style="font-weight: bold; margin-top: 10px;">ã“ã‚“ãŸ</div>
                            <div style="font-size: 12px; color: #666;">å…ƒæ°—ãªç”·ã®å­</div>
                        </div>
                        
                        <!-- å›æ–—ã‚Šã‚“ãç´¹ä»‹ -->
                        <div style="text-align: center;">
                            <img src="images/link/link-normal.png" 
                                 alt="å›æ–—ã‚Šã‚“ã" 
                                 style="width: 80px; height: 80px;">
                            <div style="font-weight: bold; margin-top: 10px;">å›æ–—ã‚Šã‚“ã</div>
                            <div style="font-size: 12px; color: #666;">ã‚¯ãƒ¼ãƒ«ãªå¥³ã®å­</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px; padding: 15px; background: #fff; border-radius: 8px; border: 1px solid #ddd;">
                        <p style="margin: 0; color: #555; font-size: 14px;">
                            ğŸ’¡ <strong>æ–‡ç« ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€å†…å®¹ã«å¿œã˜ã¦æœ€é©ãªã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒè‡ªå‹•çš„ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¾ã™</strong>
                        </p>
                    </div>
                </div>
            </section>
            
            <!-- ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ -->
            <div class="main-grid">
                <!-- å…¥åŠ›ãƒ‘ãƒãƒ« -->
                <section class="panel">
                    <div class="panel-header">
                        <span>ğŸ“</span>
                        <span>å…ƒã®æ–‡ç« ã‚’å…¥åŠ›</span>
                    </div>
                    
                    <!-- å…¥åŠ›æ–¹æ³•é¸æŠ -->
                    <div class="input-method-selector" style="padding: 15px; background: #f0f7ff; border-radius: 8px; margin-bottom: 15px;">
                        <div style="display: flex; gap: 20px; align-items: center; margin-bottom: 10px;">
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="radio" name="inputMethod" value="text" checked onchange="switchInputMethod('text')" style="margin-right: 8px;">
                                <span style="font-weight: 500;">ğŸ“ ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›</span>
                            </label>
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="radio" name="inputMethod" value="url" onchange="switchInputMethod('url')" style="margin-right: 8px;">
                                <span style="font-weight: 500;">ğŸ”— URLã‹ã‚‰å–å¾—</span>
                            </label>
                        </div>
                        
                        <!-- URLå…¥åŠ›ã‚¨ãƒªã‚¢ -->
                        <div id="urlInputArea" style="display: none;">
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <input type="url" 
                                       id="urlInput" 
                                       placeholder="https://example.com/article" 
                                       style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px;">
                                <button onclick="fetchFromURL()" 
                                        style="padding: 10px 20px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
                                    å–å¾—
                                </button>
                            </div>
                            <div id="urlStatus" style="margin-top: 10px; font-size: 13px; color: #666;"></div>
                        </div>
                    </div>
                    
                    <textarea 
                        class="text-input" 
                        id="inputText"
                        placeholder="ã“ã“ã«æ–‡ç« ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚

ä¾‹ï¼š
ä»Šæ—¥ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚
ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¨ã¯ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«æŒ‡ç¤ºã‚’å‡ºã™ã“ã¨ã§ã™ã€‚
ãªãœãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãŒé‡è¦ãªã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ
ãã‚Œã¯ç¾ä»£ç¤¾ä¼šã®ã‚ã‚‰ã‚†ã‚‹å ´é¢ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‹ã‚‰ã§ã™."
                        aria-label="å¤‰æ›ã™ã‚‹æ–‡ç« ã®å…¥åŠ›ã‚¨ãƒªã‚¢"
                    ></textarea>
                    <div class="input-footer">
                        <span class="char-count" id="charCount">0æ–‡å­—</span>
                    </div>
                    
                    <!-- éš ã—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆäº’æ›æ€§ã®ãŸã‚ï¼‰ -->
                    <select id="ai-provider" style="display: none;">
                        <option value="gemini" selected>Gemini</option>
                    </select>
                    <input type="hidden" id="geminiApiKey" value="">
                    <input type="hidden" id="apiKey" value="">
                    
                </section>
                
                <!-- å‡ºåŠ›ãƒ‘ãƒãƒ« -->
                <section class="panel">
                    <div class="panel-header">
                        <span>ğŸ’¬</span>
                        <span>ã‚†ã£ãã‚Šå°æœ¬</span>
                    </div>
                    <div class="output-area" id="outputArea" role="region" aria-live="polite">
                        <div class="empty-state">
                            <div style="font-size: 60px;">ğŸ¬</div>
                            <div>å¤‰æ›ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨</div>
                            <div>å°æœ¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>
                        </div>
                    </div>
                    <div class="stats">
                        <div>
                            <strong id="lineCount">0</strong> ã‚»ãƒªãƒ•
                        </div>
                        <div>
                            <strong id="duration">0ç§’</strong> æ¨å®š
                        </div>
                        <div>
                            <strong id="charTotal">0</strong> æ–‡å­—
                        </div>
                    </div>
                </section>
                
                <!-- å¤‰æ›ãƒœã‚¿ãƒ³ã¨AIè¨­å®š -->
                <div class="convert-section">
                    <button class="convert-btn" onclick="convertWithMode()" style="background: linear-gradient(135deg, #ff6b6b 0%, #ff9800 100%);">
                        ğŸ­ ã‚†ã£ãã‚Šå°æœ¬ã«å¤‰æ›
                    </button>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button class="convert-btn" onclick="resetTool()" style="background: linear-gradient(135deg, #6c757d 0%, #495057 100%); padding: 12px 24px; font-size: 14px;">
                            ğŸ”„ ãƒªã‚»ãƒƒãƒˆ
                        </button>
                    </div>
                    
                    <div style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="aiModeToggle" checked onchange="toggleAIMode()" 
                                   style="width: 20px; height: 20px; cursor: pointer;">
                            <span style="font-size: 14px;">
                                ğŸ¤– AIãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ï¼ˆè‡ªç„¶ãªä¼šè©±ã«å¤‰æ›ï¼‰
                            </span>
                        </label>
                        
                        <!-- APIåˆ©ç”¨å›æ•°è¡¨ç¤º -->
                        <div id="api-usage-display" style="margin-top: 10px; font-size: 12px; color: #666;"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ä½œæˆãƒ¢ãƒ¼ãƒ‰ã‚¿ãƒ– -->
        <div id="create-tab" class="tab-content" role="tabpanel">
            <div class="panel">
                <div class="panel-header">
                    <span>ğŸ’¬</span>
                    <span>å°æœ¬ã‚’ç›´æ¥ä½œæˆ</span>
                </div>
                <div style="text-align: center; padding: 100px 20px; color: #999;">
                    <div style="font-size: 48px; margin-bottom: 20px;">ğŸš§</div>
                    <div>ãƒãƒ£ãƒƒãƒˆå½¢å¼ã§å°æœ¬ã‚’ä½œæˆã™ã‚‹æ©Ÿèƒ½</div>
                    <div>ï¼ˆé–‹ç™ºä¸­ï¼‰</div>
                </div>
            </div>
        </div>
        
        <!-- ã‚«ã‚¹ã‚¿ãƒ è¨­å®šã‚¿ãƒ– -->
        <div id="custom-tab" class="tab-content" role="tabpanel">
            <div class="panel">
                <div class="panel-header">
                    <span>ğŸ¨</span>
                    <span>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè¨­å®š</span>
                </div>
                <div style="padding: 20px;">
                    <h3>èƒŒæ™¯è¨­å®š</h3>
                    <p>èƒŒæ™¯ç”»åƒã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</p>
                    <br>
                    <h3>éŸ³å£°è¨­å®š</h3>
                    <p>èª­ã¿ä¸Šã’é€Ÿåº¦ãƒ»ãƒ”ãƒƒãƒã®èª¿æ•´</p>
                    <br>
                    <h3>ã‚¨ãƒ•ã‚§ã‚¯ãƒˆè¨­å®š</h3>
                    <p>ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœã®è¨­å®š</p>
                </div>
            </div>
        </div>
        
        <!-- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ -->
        <section class="export-section">
            <div class="export-buttons">
                <button class="export-btn" onclick="copyScript()" aria-label="å°æœ¬ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼">
                    <span class="export-icon">ğŸ“‹</span>
                    <span>ã‚³ãƒ”ãƒ¼</span>
                </button>
                <button class="export-btn" onclick="downloadText()" aria-label="ãƒ†ã‚­ã‚¹ãƒˆå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰">
                    <span class="export-icon">ğŸ“„</span>
                    <span>ãƒ†ã‚­ã‚¹ãƒˆ</span>
                </button>
                <button class="export-btn" onclick="downloadJSON()" aria-label="JSONå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰">
                    <span class="export-icon">ğŸ’¾</span>
                    <span>JSON</span>
                </button>
                <button class="export-btn" onclick="downloadYMMP()" aria-label="YMMPå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰">
                    <span class="export-icon">ğŸ¬</span>
                    <span>YMMP</span>
                </button>
                <button class="export-btn" onclick="importFile()" aria-label="ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿">
                    <span class="export-icon">ğŸ“</span>
                    <span>èª­ã¿è¾¼ã¿</span>
                </button>
                <button class="export-btn" onclick="shareToTwitter()" aria-label="Twitterã§å…±æœ‰" style="background: linear-gradient(135deg, #1DA1F2 0%, #14171A 100%); color: white; border: none;">
                    <span class="export-icon">ğŸ¦</span>
                    <span>Twitter</span>
                </button>
                <button class="export-btn" onclick="saveAsYahooNewsArticle()" aria-label="Yahoo Newsé¢¨ã®è¨˜äº‹ã¨ã—ã¦ä¿å­˜" style="background: linear-gradient(135deg, #ff6b6b 0%, #ff9800 100%); color: white; border: none;">
                    <span class="export-icon">ğŸ“°</span>
                    <span>è¨˜äº‹ã¨ã—ã¦å…¬é–‹</span>
                </button>
                <button class="export-btn" onclick="viewArticles()" aria-label="è¨˜äº‹ä¸€è¦§ã‚’è¦‹ã‚‹" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none;">
                    <span class="export-icon">ğŸ“š</span>
                    <span>è¨˜äº‹ä¸€è¦§</span>
                </button>
            </div>
        </section>
        
        <!-- å®Ÿéš›ã«ä½œæˆã—ãŸã‚†ã£ãã‚Šè§£èª¬å‹•ç”»ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="actual-videos-section" style="background: white; border-radius: 12px; padding: 30px; margin-top: 40px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <h2 style="color: #764ba2; font-size: 24px; margin-bottom: 30px; text-align: center; border-bottom: 3px solid #764ba2; padding-bottom: 15px;">
                ğŸ¥ å®Ÿéš›ã«ä½œæˆã—ãŸã‚†ã£ãã‚Šè§£èª¬å‹•ç”»
            </h2>
            
            <!-- é…ä¿¡è€…ã•ã‚“å‘ã‘å‹•ç”» -->
            <div style="margin-bottom: 40px;">
                <h3 style="color: #ff6b6b; font-size: 20px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    <span style="background: linear-gradient(135deg, #ff6b6b 0%, #ff9800 100%); color: white; padding: 5px 15px; border-radius: 20px; font-size: 14px;">For Streamer</span>
                    é…ä¿¡è€…ã•ã‚“å‘ã‘
                </h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                    <!-- å‹•ç”»1: ã—ã‚‰ã„ã£ -->
                    <div style="background: #f8f9fa; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                        <div style="position: relative; padding-bottom: 56.25%; height: 0;">
                            <iframe 
                                src="https://www.youtube.com/embed/5SftFtaah_g" 
                                title="ã—ã‚‰ã„ã£ - é…ä¿¡è€…å‘ã‘ã‚†ã£ãã‚Šè§£èª¬"
                                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                                allowfullscreen>
                            </iframe>
                        </div>
                        <div style="padding: 12px; background: white;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                                <img class="creator-avatar" data-twitter-avatar="ewbcwj_lv" src="" alt="ã—ã‚‰ã„ã£" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
                                <div style="flex: 1;">
                                    <h4 style="margin: 0; font-size: 15px; color: #333; font-weight: bold;" data-twitter-name="ewbcwj_lv">ã—ã‚‰ã„ã£</h4>
                                    <a href="https://twitter.com/ewbcwj_lv" target="_blank" style="display: inline-flex; align-items: center; gap: 4px; text-decoration: none; color: #666; font-size: 13px;">
                                        <span>@ewbcwj_lv</span>
                                    </a>
                                </div>
                            </div>
                            <div style="font-size: 12px; color: #666;">
                                <span data-twitter-followers="ewbcwj_lv">é…ä¿¡è€…ã¨ã—ã¦æ´»å‹•ä¸­</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å‹•ç”»2: ã¾ãã‚‹2.0 -->
                    <div style="background: #f8f9fa; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                        <div style="position: relative; padding-bottom: 56.25%; height: 0;">
                            <iframe 
                                src="https://www.youtube.com/embed/VrArKwarHhE" 
                                title="ã¾ãã‚‹2.0 - é…ä¿¡è€…å‘ã‘ã‚†ã£ãã‚Šè§£èª¬"
                                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                                allowfullscreen>
                            </iframe>
                        </div>
                        <div style="padding: 12px; background: white;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                                <img class="creator-avatar" data-twitter-avatar="m20210411" src="" alt="ã¾ãã‚‹2.0" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
                                <div style="flex: 1;">
                                    <h4 style="margin: 0; font-size: 15px; color: #333; font-weight: bold;" data-twitter-name="m20210411">ã¾ãã‚‹2.0</h4>
                                    <a href="https://twitter.com/m20210411" target="_blank" style="display: inline-flex; align-items: center; gap: 4px; text-decoration: none; color: #666; font-size: 13px;">
                                        <span>@m20210411</span>
                                    </a>
                                </div>
                            </div>
                            <div style="font-size: 12px; color: #666;">
                                <span data-twitter-followers="m20210411">é…ä¿¡è€…ã¨ã—ã¦æ´»å‹•ä¸­</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å‹•ç”»3: ã‚ªã‚ªãƒãƒ¦ -->
                    <div style="background: #f8f9fa; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                        <div style="position: relative; padding-bottom: 56.25%; height: 0;">
                            <iframe 
                                src="https://www.youtube.com/embed/HaGAqeWB73M" 
                                title="ã‚ªã‚ªãƒãƒ¦ - é…ä¿¡è€…å‘ã‘ã‚†ã£ãã‚Šè§£èª¬"
                                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                                allowfullscreen>
                            </iframe>
                        </div>
                        <div style="padding: 12px; background: white;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                                <img class="creator-avatar" data-twitter-avatar="oomayu12345" src="" alt="ã‚ªã‚ªãƒãƒ¦" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
                                <div style="flex: 1;">
                                    <h4 style="margin: 0; font-size: 15px; color: #333; font-weight: bold;" data-twitter-name="oomayu12345">ã‚ªã‚ªãƒãƒ¦</h4>
                                    <a href="https://twitter.com/oomayu12345" target="_blank" style="display: inline-flex; align-items: center; gap: 4px; text-decoration: none; color: #666; font-size: 13px;">
                                        <span>@oomayu12345</span>
                                    </a>
                                </div>
                            </div>
                            <div style="font-size: 12px; color: #666;">
                                <span data-twitter-followers="oomayu12345">é…ä¿¡è€…ã¨ã—ã¦æ´»å‹•ä¸­</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ã‚¢ã‚¤ãƒ‰ãƒ«ã•ã‚“å‘ã‘å‹•ç”» -->
            <div>
                <h3 style="color: #feca57; font-size: 20px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    <span style="background: linear-gradient(135deg, #feca57 0%, #f368e0 100%); color: white; padding: 5px 15px; border-radius: 20px; font-size: 14px;">For Idol</span>
                    ã‚¢ã‚¤ãƒ‰ãƒ«ã•ã‚“å‘ã‘
                </h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                    <!-- å‹•ç”»1: æ—©ä¹™å¥³ã‚†ã‚ -->
                    <div style="background: #f8f9fa; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                        <div style="position: relative; padding-bottom: 56.25%; height: 0;">
                            <iframe 
                                src="https://www.youtube.com/embed/d2e7HOc0700" 
                                title="æ—©ä¹™å¥³ã‚†ã‚ - ã‚¢ã‚¤ãƒ‰ãƒ«å‘ã‘ã‚†ã£ãã‚Šè§£èª¬"
                                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                                allowfullscreen>
                            </iframe>
                        </div>
                        <div style="padding: 12px; background: white;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                                <img class="creator-avatar" data-twitter-avatar="yua_210826" src="" alt="æ—©ä¹™å¥³ã‚†ã‚" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
                                <div style="flex: 1;">
                                    <h4 style="margin: 0; font-size: 15px; color: #333; font-weight: bold;" data-twitter-name="yua_210826">æ—©ä¹™å¥³ã‚†ã‚</h4>
                                    <a href="https://twitter.com/yua_210826" target="_blank" style="display: inline-flex; align-items: center; gap: 4px; text-decoration: none; color: #666; font-size: 13px;">
                                        <span>@yua_210826</span>
                                    </a>
                                </div>
                            </div>
                            <div style="font-size: 12px; color: #666;">
                                <span data-twitter-followers="yua_210826">ã‚¢ã‚¤ãƒ‰ãƒ«ã¨ã—ã¦æ´»å‹•ä¸­</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å‹•ç”»2: æ¡ƒè¯ã¡ã‚ƒã‚“ -->
                    <div style="background: #f8f9fa; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                        <div style="position: relative; padding-bottom: 56.25%; height: 0;">
                            <iframe 
                                src="https://www.youtube.com/embed/_m8YeLXP9QM" 
                                title="æ¡ƒè¯ã¡ã‚ƒã‚“ - ã‚¢ã‚¤ãƒ‰ãƒ«å‘ã‘ã‚†ã£ãã‚Šè§£èª¬"
                                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                                allowfullscreen>
                            </iframe>
                        </div>
                        <div style="padding: 12px; background: white;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                                <img class="creator-avatar" data-twitter-avatar="momoka_Zunda" src="" alt="æ¡ƒè¯ã¡ã‚ƒã‚“" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
                                <div style="flex: 1;">
                                    <h4 style="margin: 0; font-size: 15px; color: #333; font-weight: bold;" data-twitter-name="momoka_Zunda">æ¡ƒè¯ã¡ã‚ƒã‚“</h4>
                                    <a href="https://twitter.com/momoka_Zunda" target="_blank" style="display: inline-flex; align-items: center; gap: 4px; text-decoration: none; color: #666; font-size: 13px;">
                                        <span>@momoka_Zunda</span>
                                    </a>
                                </div>
                            </div>
                            <div style="font-size: 12px; color: #666;">
                                <span data-twitter-followers="momoka_Zunda">ã‚¢ã‚¤ãƒ‰ãƒ«ã¨ã—ã¦æ´»å‹•ä¸­</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å‹•ç”»3: å¤§æœ¨ãƒãƒ«ãƒŸï¼ˆæ¬¡å›äºˆå®šï¼‰ -->
                    <div style="background: #f8f9fa; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                        <div style="padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); text-align: center; min-height: 180px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                            <div style="background: white; width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.2);">
                                <span style="font-size: 40px;">ğŸˆâ€â¬›</span>
                            </div>
                            <h3 style="color: white; font-size: 18px; margin: 0;">æ¬¡å›å…¬é–‹äºˆå®š</h3>
                            <p style="color: rgba(255,255,255,0.9); font-size: 14px; margin-top: 5px;">Coming Soon!</p>
                        </div>
                        <div style="padding: 12px; background: white;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                                <img class="creator-avatar" data-twitter-avatar="0308harumi" src="" alt="å¤§æœ¨ãƒãƒ«ãƒŸ" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
                                <div style="flex: 1;">
                                    <h4 style="margin: 0; font-size: 15px; color: #333; font-weight: bold;" data-twitter-name="0308harumi">å¤§æœ¨ãƒãƒ«ãƒŸ ğŸˆâ€â¬›</h4>
                                    <a href="https://twitter.com/0308harumi" target="_blank" style="display: inline-flex; align-items: center; gap: 4px; text-decoration: none; color: #666; font-size: 13px;">
                                        <span>@0308harumi</span>
                                    </a>
                                </div>
                            </div>
                            <div style="font-size: 12px; color: #666;">
                                <span data-twitter-followers="0308harumi">æ¬¡å›ã®å‹•ç”»ã‚’ãŠæ¥½ã—ã¿ã«ï¼</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 2px solid #f0f0f0;">
                <p style="color: #666; margin-bottom: 15px;">ã‚‚ã£ã¨å‹•ç”»ã‚’è¦‹ãŸã„æ–¹ã¯YouTubeãƒãƒ£ãƒ³ãƒãƒ«ã¸ï¼</p>
                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <a href="https://www.youtube.com/@streamerfunch" target="_blank" 
                       style="display: inline-block; padding: 12px 25px; background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%); color: white; text-decoration: none; border-radius: 25px; font-weight: bold; box-shadow: 0 4px 10px rgba(255,0,0,0.3);">
                        ğŸ“º é…ä¿¡è€…å¿œæ´ãƒãƒ£ãƒ³ãƒãƒ«
                    </a>
                    <a href="https://www.youtube.com/@idolfunch" target="_blank" 
                       style="display: inline-block; padding: 12px 25px; background: linear-gradient(135deg, #f368e0 0%, #ee5a6f 100%); color: white; text-decoration: none; border-radius: 25px; font-weight: bold; box-shadow: 0 4px 10px rgba(243,104,224,0.3);">
                        ğŸŒŸ ã‚¢ã‚¤ãƒ‰ãƒ«å¿œæ´ãƒãƒ£ãƒ³ãƒãƒ«
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆç¾åœ¨ã¯ç„¡åŠ¹åŒ–ï¼‰ -->
    <!-- 
    <div id="addCharModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        ãƒ¢ãƒ¼ãƒ€ãƒ«å†…å®¹ã¯å‰Šé™¤
    </div>
    -->
    
    <!-- JavaScript -->
    <script src="js/api-client.js"></script>
    <script src="js/user-manager.js"></script>
    <script src="js/twitter-auth.js"></script>
    <script src="js/article-manager.js"></script>
    <script src="js/url-fetcher.js"></script>
    <script>
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’è¡¨ç¤º
        // Twitterèªè¨¼çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
        async function checkTwitterAuth() {
            try {
                const response = await fetch('/api/twitter-check-auth.php');
                const data = await response.json();
                
                console.log('Twitter Auth Response:', data); // ãƒ‡ãƒãƒƒã‚°ç”¨
                
                if (data.authenticated && data.user) {
                    // ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã‚’localStorageã«ä¿å­˜
                    const userInfo = {
                        loggedIn: true,
                        name: data.user.name,
                        username: data.user.username,
                        profileImage: data.user.profile_image_url,
                        followers_count: data.user.followers_count || 0,
                        avatar: data.user.profile_image_url
                    };
                    console.log('User Info to Save:', userInfo); // ãƒ‡ãƒãƒƒã‚°ç”¨
                    localStorage.setItem('twitter_user', JSON.stringify(userInfo));
                    return userInfo;
                } else {
                    // æœªãƒ­ã‚°ã‚¤ãƒ³ã®å ´åˆã¯localStorageã‚’ã‚¯ãƒªã‚¢
                    localStorage.removeItem('twitter_user');
                    return null;
                }
            } catch (error) {
                console.error('Twitterèªè¨¼ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼:', error);
                return null;
            }
        }

        // Twitter ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°ã‚’å–å¾—ã—ã¦è¡¨ç¤º
        async function loadTwitterFollowers() {
            console.log('loadTwitterFollowers é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã—ãŸ');
            const users = [
                'ewbcwj_lv',     // ã—ã‚‰ã„ã£
                'm20210411',     // ã¾ãã‚‹2.0
                'oomayu12345',   // ã‚ªã‚ªãƒãƒ¦
                'yua_210826',    // æ—©ä¹™å¥³ã‚†ã‚
                'momoka_Zunda',  // æ¡ƒè¯ã¡ã‚ƒã‚“
                '0308harumi'     // å¤§æœ¨ãƒãƒ«ãƒŸ
            ];
            
            try {
                // å…ƒã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«æˆ»ã™
                const url = `/api/get-twitter-followers-v2.php?users=${users.join(',')}`;
                console.log('API URL:', url);
                const response = await fetch(url);
                console.log('Response status:', response.status);
                const data = await response.json();
                console.log('API Response data:', data);
                
                if (data.success && data.data) {
                    console.log('APIãƒ‡ãƒ¼ã‚¿å–å¾—æˆåŠŸ:', data.data);
                    // å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°
                    Object.keys(data.data).forEach(username => {
                        const userData = data.data[username];
                        if (userData) {
                            console.log(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ ${username} ã®ãƒ‡ãƒ¼ã‚¿:`, userData);
                            updateTwitterUserInfo(username, userData);
                        }
                    });
                } else {
                    console.warn('APIãƒ‡ãƒ¼ã‚¿ãŒä¸æ­£:', data);
                }
            } catch (error) {
                console.error('ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
                console.error('ã‚¨ãƒ©ãƒ¼è©³ç´°:', error.stack);
            }
        }
        
        function updateTwitterUserInfo(username, userData) {
            console.log(`updateTwitterUserInfo å‘¼ã³å‡ºã—: ${username}`, userData);
            if (!userData) {
                console.warn(`${username} ã®ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“`);
                return;
            }
            
            // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåã‚’æ›´æ–°
            const nameElements = document.querySelectorAll(`[data-twitter-name="${username}"]`);
            console.log(`${username} ã®åå‰è¦ç´ æ•°:`, nameElements.length);
            nameElements.forEach(el => {
                if (userData.name) {
                    el.textContent = userData.name;
                    console.log(`${username} ã®åå‰ã‚’æ›´æ–°: ${userData.name}`);
                }
            });
            
            // ã‚¢ãƒã‚¿ãƒ¼ç”»åƒã‚’æ›´æ–°
            const avatarElements = document.querySelectorAll(`[data-twitter-avatar="${username}"]`);
            console.log(`${username} ã®ã‚¢ãƒã‚¿ãƒ¼è¦ç´ æ•°:`, avatarElements.length);
            avatarElements.forEach(el => {
                if (userData.profile_image && userData.profile_image !== '') {
                    console.log(`${username} ã®ã‚¢ãƒã‚¿ãƒ¼ã‚’æ›´æ–°: ${userData.profile_image}`);
                    el.src = userData.profile_image;
                    el.style.display = 'block';
                    el.onerror = function() {
                        this.src = '/images/link/link-normal.png';
                    };
                } else {
                    console.log(`${username} ã®ã‚¢ãƒã‚¿ãƒ¼URLãŒç©ºã§ã™`);
                    el.src = '/images/link/link-normal.png';
                }
            });
            
            // ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°ã‚’æ›´æ–°
            const followerElements = document.querySelectorAll(`[data-twitter-followers="${username}"]`);
            console.log(`${username} ã®ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼è¦ç´ æ•°:`, followerElements.length);
            followerElements.forEach(el => {
                if (userData.followers_count !== undefined) {
                    const count = userData.followers_count;
                    if (typeof count === 'number') {
                        // ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°ã‚’è¡¨ç¤º
                        if (count >= 10000) {
                            el.textContent = `${(count / 10000).toFixed(1)}ä¸‡ ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼`;
                        } else if (count >= 1000) {
                            el.textContent = `${count.toLocaleString('ja-JP')} ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼`;
                        } else {
                            el.textContent = `${count} ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼`;
                        }
                    } else {
                        el.textContent = `${count} ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼`;
                    }
                } else {
                    console.log(`${username} ã®ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°ãŒæœªå®šç¾©ã§ã™`);
                }
            });
        }

        // æœªå®šç¾©é–¢æ•°ã®ãƒ€ãƒŸãƒ¼å®šç¾©ï¼ˆã‚¨ãƒ©ãƒ¼å›é¿ç”¨ï¼‰
        function loadRecentArticles() {
            console.log('loadRecentArticles: æœªå®Ÿè£…');
        }
        function loadUserArticlesAsNews() {
            console.log('loadUserArticlesAsNews: æœªå®Ÿè£…');
        }
        function updateRanking() {
            console.log('updateRanking: æœªå®Ÿè£…');
        }
        
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('DOMContentLoaded ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿ');
            
            // Twitterèªè¨¼çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
            try {
                await checkTwitterAuth();
            } catch (e) {
                console.error('checkTwitterAuth ã‚¨ãƒ©ãƒ¼:', e);
            }
            
            try {
                updateUserDisplay();
            } catch (e) {
                console.error('updateUserDisplay ã‚¨ãƒ©ãƒ¼:', e);
            }
            
            try {
                loadRecentArticles();
            } catch (e) {
                console.error('loadRecentArticles ã‚¨ãƒ©ãƒ¼:', e);
            }
            
            try {
                loadUserArticlesAsNews();
            } catch (e) {
                console.error('loadUserArticlesAsNews ã‚¨ãƒ©ãƒ¼:', e);
            }
            
            try {
                updateRanking();
            } catch (e) {
                console.error('updateRanking ã‚¨ãƒ©ãƒ¼:', e);
            }
            
            // ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°ã‚’èª­ã¿è¾¼ã‚€
            console.log('loadTwitterFollowers ã‚’å‘¼ã³å‡ºã—ã¾ã™');
            try {
                await loadTwitterFollowers();
                console.log('loadTwitterFollowers å®Œäº†');
            } catch (e) {
                console.error('loadTwitterFollowers ã‚¨ãƒ©ãƒ¼:', e);
            }
            
            // å°æœ¬å±¥æ­´ãƒªã‚¹ãƒˆã‚’åˆæœŸåŒ–
            if (typeof updateScriptHistoryList === 'function') {
                updateScriptHistoryList();
            }
        });
        
        let currentSortMethod = 'recent';
        let currentCategory = 'all';
        
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡¨ç¤ºã®æ›´æ–°
        function updateUserDisplay() {
            const userActions = document.getElementById('userActions');
            
            // LocalStorageã‹ã‚‰ç›´æ¥ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—
            let user = null;
            const twitterUser = localStorage.getItem('twitter_user');
            if (twitterUser) {
                try {
                    user = JSON.parse(twitterUser);
                } catch (e) {
                    console.error('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', e);
                }
            }
            
            // æ—§å½¢å¼ã¨ã®äº’æ›æ€§ï¼ˆuserProfileã‚‚ãƒã‚§ãƒƒã‚¯ï¼‰
            if (!user) {
                const userProfile = localStorage.getItem('userProfile');
                if (userProfile) {
                    try {
                        user = JSON.parse(userProfile);
                    } catch (e) {
                        console.error('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', e);
                    }
                }
            }
            
            // æ—§å½¢å¼ã¨ã®äº’æ›æ€§
            if (!user && window.userManager) {
                user = window.userManager.getCurrentUser();
            }
            
            if (user && user.loggedIn) {
                // ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã®è¡¨ç¤º
                const avatarUrl = user.profileImage || user.avatar || '/images/link/link-normal.png';
                const displayName = user.name || user.displayName || user.username || 'ãƒ¦ãƒ¼ã‚¶ãƒ¼';
                const username = user.username || 'user';
                
                // ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°ã‚’å–å¾—
                const followers = user.followers || user.followers_count || 0;
                
                // ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
                let formattedFollowers = followers.toString();
                if (typeof followers === 'number') {
                    if (followers >= 10000) {
                        // 1ä¸‡ä»¥ä¸Šã®å ´åˆã¯ã€Œ1.2ä¸‡ã€ã®ã‚ˆã†ã«è¡¨ç¤º
                        formattedFollowers = (followers / 10000).toFixed(1) + 'ä¸‡';
                    } else if (followers >= 1000) {
                        // 1000ä»¥ä¸Šã®å ´åˆã¯ã€Œ1,234ã€ã®ã‚ˆã†ã«ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š
                        formattedFollowers = followers.toLocaleString('ja-JP');
                    } else {
                        // 1000æœªæº€ã®å ´åˆã¯ãã®ã¾ã¾
                        formattedFollowers = followers.toString();
                    }
                }
                
                userActions.innerHTML = `
                    <div class="user-info-display">
                        <img src="${avatarUrl}" alt="${displayName}" class="user-avatar-small" onerror="this.src='/images/link/link-normal.png'">
                        <div class="user-details">
                            <span class="user-display-name">${displayName}</span>
                            <span class="user-name-small">@${username}</span>
                            <span class="user-followers">${formattedFollowers || '0'} ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼</span>
                        </div>
                    </div>
                    <button class="logout-btn" onclick="handleLogout()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
                `;
            } else {
                // æœªãƒ­ã‚°ã‚¤ãƒ³ã®è¡¨ç¤º
                userActions.innerHTML = `
                    <button class="login-btn" onclick="handleLogin()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                        </svg>
                        ãƒ­ã‚°ã‚¤ãƒ³
                    </button>
                `;
            }
        }
        
        // ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†
        function handleLogin() {
            window.location.href = 'login/';
        }
        
        // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†
        async function handleLogout() {
            if (confirm('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                // ã‚µãƒ¼ãƒãƒ¼å´ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤
                try {
                    await fetch('/api/twitter-logout.php', { method: 'POST' });
                } catch (error) {
                    console.error('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼:', error);
                }
                
                // LocalStorageã‹ã‚‰å‰Šé™¤
                localStorage.removeItem('userProfile');
                localStorage.removeItem('twitter_access_token');
                localStorage.removeItem('twitter_refresh_token');
                localStorage.removeItem('twitter_user');
                
                // æ—§å½¢å¼ã¨ã®äº’æ›æ€§
                if (window.userManager && window.userManager.logout) {
                    window.userManager.logout();
                }
                
                updateUserDisplay();
                showNotification('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ');
            }
        }
        
        // å°æœ¬ã®ä¸¦ã³æ›¿ãˆ
        function sortScripts(method) {
            // ä¸¦ã³æ›¿ãˆãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.sort-btn').forEach(btn => {
                btn.classList.remove('active');
                btn.style.background = 'white';
                btn.style.color = '#666';
                btn.style.border = '1px solid #ddd';
            });
            
            const activeBtn = event.target;
            activeBtn.classList.add('active');
            activeBtn.style.background = '#6366f1';
            activeBtn.style.color = 'white';
            activeBtn.style.border = 'none';
            
            // TODO: å®Ÿéš›ã®ä¸¦ã³æ›¿ãˆå‡¦ç†ã‚’å®Ÿè£…
            console.log('ä¸¦ã³æ›¿ãˆ:', method);
        }
        
        // è¨˜äº‹ã®ä¸¦ã³æ›¿ãˆ
        function sortArticles(method) {
            currentSortMethod = method;
            
            // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.sort-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            if (method === 'recent') {
                document.getElementById('sortRecent').classList.add('active');
            } else if (method === 'popular') {
                document.getElementById('sortPopular').classList.add('active');
            } else if (method === 'comments') {
                document.getElementById('sortComments').classList.add('active');
            }
            
            loadRecentArticles();
        }
        
        // æ–°ã—ã„è¨˜äº‹ã‚’ä½œæˆï¼ˆä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒ ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼‰
        function createNewArticle() {
            // å¤‰æ›ãƒ¢ãƒ¼ãƒ‰ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆ
            if (typeof switchTab === 'function') {
                switchTab('convert');
            }
            // å…¥åŠ›ã‚¨ãƒªã‚¢ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            const inputArea = document.getElementById('inputText');
            if (inputArea) {
                inputArea.scrollIntoView({ behavior: 'smooth', block: 'center' });
                inputArea.focus();
            }
        }
        
        // æœ€è¿‘ã®è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿
        function loadRecentArticles() {
            const articles = window.articleManager ? window.articleManager.getArticles(currentCategory) : [];
            const container = document.getElementById('recentArticles');
            
            if (articles.length === 0) {
                container.innerHTML = '<div class="no-articles-message">è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“</div>';
                return;
            }
            
            // ä¸¦ã³æ›¿ãˆå‡¦ç†
            let sortedArticles = [...articles];
            if (currentSortMethod === 'popular') {
                sortedArticles.sort((a, b) => (b.viewCount || 0) - (a.viewCount || 0));
            } else if (currentSortMethod === 'comments') {
                sortedArticles.sort((a, b) => (b.commentCount || 0) - (a.commentCount || 0));
            } else {
                // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯æ–°ã—ã„é †ï¼ˆã™ã§ã«ã‚½ãƒ¼ãƒˆæ¸ˆã¿ï¼‰
            }
            
            // æœ€å¤§5ä»¶ã®ã¿è¡¨ç¤º
            const displayArticles = sortedArticles.slice(0, 5);
            container.innerHTML = `
                <div style="font-size: 14px; color: #666; margin-bottom: 10px;">æœ€è¿‘ã®è¨˜äº‹ï¼š</div>
                ${displayArticles.map(article => `
                    <div style="padding: 12px; background: white; border-radius: 8px; margin-bottom: 8px; cursor: pointer; transition: all 0.3s; border: 1px solid #e0e0e0;"
                         onmouseover="this.style.background='#f8f8f8'; this.style.borderColor='#764ba2'" 
                         onmouseout="this.style.background='white'; this.style.borderColor='#e0e0e0'"
                         onclick="window.location.href='news/#article-${article.id}'">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 12px; color: #999; background: #f0f0f0; padding: 2px 8px; border-radius: 4px;">${article.category}</span>
                                ${article.isNew ? '<span style="background: #ff4444; color: white; padding: 2px 6px; border-radius: 3px; font-size: 10px;">NEW</span>' : ''}
                            </div>
                            <div style="display: flex; gap: 15px; align-items: center;">
                                <span style="font-size: 12px; color: #666;">ğŸ‘ ${article.viewCount || 0}</span>
                                <span style="font-size: 12px; color: #666;">ğŸ’¬ ${article.commentCount || 0}</span>
                                <span style="font-size: 12px; color: #999;">${new Date(article.timestamp).toLocaleDateString()}</span>
                            </div>
                        </div>
                        <div style="font-weight: bold; margin-top: 8px; color: #333; font-size: 15px;">${article.shortHeadline || article.headline}</div>
                        ${article.author ? `
                            <div style="display: flex; align-items: center; gap: 8px; margin-top: 8px;">
                                <img src="${article.author.avatar}" style="width: 20px; height: 20px; border-radius: 50%;">
                                <span style="font-size: 12px; color: #666;">@${article.author.username}</span>
                            </div>
                        ` : ''}
                    </div>
                `).join('')}
                <div style="text-align: center; margin-top: 15px;">
                    <a href="news/" style="color: #764ba2; text-decoration: none; font-size: 14px; font-weight: 500;">â†’ ã™ã¹ã¦ã®è¨˜äº‹ã‚’è¦‹ã‚‹</a>
                </div>
            `;
        }
        
        // ã™ã¹ã¦ã®è¨˜äº‹ã‚’å‰Šé™¤
        function deleteAllArticles() {
            if (confirm('ã™ã¹ã¦ã®è¨˜äº‹ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {
                if (window.articleManager) {
                    window.articleManager.clearAllArticles();
                    loadRecentArticles();
                    showNotification('ã™ã¹ã¦ã®è¨˜äº‹ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');
                }
            }
        }
        
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½œæˆã—ãŸè¨˜äº‹ã‚’Yahoo Newsé¢¨ã«è¡¨ç¤º
        function loadUserArticlesAsNews() {
            const articles = JSON.parse(localStorage.getItem('savedArticles') || '[]');
            const userArticlesArea = document.getElementById('userArticlesArea');
            const noArticlesMessage = document.getElementById('noArticlesMessage');
            
            if (articles.length === 0) {
                userArticlesArea.style.display = 'none';
                // ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ç¢ºèª
                const user = localStorage.getItem('twitter_user');
                if (user) {
                    // ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã®å ´åˆã¯è¨˜äº‹ä½œæˆã‚’ä¿ƒã™
                    noArticlesMessage.innerHTML = `
                        <div style="font-size: 48px; margin-bottom: 20px;">ğŸ“°</div>
                        <p style="font-size: 16px; margin-bottom: 20px;">ã¾ã è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“</p>
                        <p style="font-size: 14px; color: #666;">ä¸‹ã®ã€Œæ–°ã—ã„è¨˜äº‹ã‚’ä½œæˆã€ãƒœã‚¿ãƒ³ã‹ã‚‰è¨˜äº‹ã‚’ä½œæˆã§ãã¾ã™</p>
                    `;
                } else {
                    // æœªãƒ­ã‚°ã‚¤ãƒ³ã®å ´åˆã¯ãƒ­ã‚°ã‚¤ãƒ³ã‚’ä¿ƒã™
                    noArticlesMessage.innerHTML = `
                        <div style="font-size: 48px; margin-bottom: 20px;">ğŸ“°</div>
                        <p style="font-size: 16px; margin-bottom: 20px;">ã¾ã è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“</p>
                        <p style="font-size: 14px; margin-bottom: 10px;">è¨˜äº‹ã‚’ä½œæˆã™ã‚‹ã«ã¯Twitterãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™</p>
                        <button onclick="handleLogin()" style="padding: 12px 30px; background: #1DA1F2; color: white; border: none; border-radius: 25px; cursor: pointer; font-weight: bold; display: flex; align-items: center; gap: 8px; margin: 0 auto;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                            </svg>
                            Twitterã§ãƒ­ã‚°ã‚¤ãƒ³
                        </button>
                    `;
                }
                noArticlesMessage.style.display = 'block';
                return;
            }
            
            userArticlesArea.style.display = 'block';
            noArticlesMessage.style.display = 'none';
            
            // æœ€æ–°ã®è¨˜äº‹ã‹ã‚‰è¡¨ç¤º
            const sortedArticles = articles.sort((a, b) => 
                new Date(b.timestamp || 0) - new Date(a.timestamp || 0)
            );
            
            let html = '';
            
            // æœ€åˆã®è¨˜äº‹ã‚’ãƒ¡ã‚¤ãƒ³è¨˜äº‹ã¨ã—ã¦å¤§ããè¡¨ç¤º
            if (sortedArticles[0]) {
                const mainArticle = sortedArticles[0];
                const timeAgo = getTimeAgo(mainArticle.timestamp);
                const summary = generateSummaryFromScript(mainArticle.script);
                
                html += `
                    <article class="main-news-item" style="margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #eee; cursor: pointer;" 
                             onclick="viewArticleDetail('${mainArticle.id}')">
                        <h3 style="font-size: 18px; margin-bottom: 10px;">
                            <a href="#" onclick="event.preventDefault(); viewArticleDetail('${mainArticle.id}')" 
                               style="color: #333; text-decoration: none; font-weight: bold;">
                                ${mainArticle.title || generateTitleFromScript(mainArticle.script)}
                            </a>
                        </h3>
                        <p style="color: #666; font-size: 14px; line-height: 1.6;">
                            ${summary}
                        </p>
                        <div style="display: flex; gap: 15px; margin-top: 10px; font-size: 12px; color: #999;">
                            <span>ğŸ­ ã‚†ã£ãã‚Šå°æœ¬</span>
                            <span>${timeAgo}</span>
                            ${isNewArticle(mainArticle.timestamp) ? '<span style="color: #d32f2f;">NEW</span>' : ''}
                            <span>ğŸ‘ ${mainArticle.viewCount || 0}å›</span>
                        </div>
                    </article>
                `;
            }
            
            // ãã®ä»–ã®è¨˜äº‹ã‚’ãƒªã‚¹ãƒˆè¡¨ç¤º
            if (sortedArticles.length > 1) {
                html += '<div class="news-list">';
                
                for (let i = 1; i < Math.min(sortedArticles.length, 6); i++) {
                    const article = sortedArticles[i];
                    const timeAgo = getTimeAgo(article.timestamp);
                    
                    html += `
                        <article class="news-item" style="padding: 15px 0; border-bottom: 1px solid #eee; cursor: pointer;"
                                 onclick="viewArticleDetail('${article.id}')">
                            <h4 style="font-size: 15px; margin-bottom: 8px;">
                                <a href="#" onclick="event.preventDefault(); viewArticleDetail('${article.id}')" 
                                   style="color: #333; text-decoration: none;">
                                    ${article.title || generateTitleFromScript(article.script)}
                                </a>
                            </h4>
                            <div style="font-size: 12px; color: #999;">
                                <span>ğŸ­ ã‚†ã£ãã‚Šå°æœ¬</span>
                                <span style="margin-left: 10px;">${timeAgo}</span>
                                <span style="margin-left: 10px;">ğŸ‘ ${article.viewCount || 0}</span>
                            </div>
                        </article>
                    `;
                }
                
                html += '</div>';
            }
            
            userArticlesArea.innerHTML = html;
        }
        
        // å°æœ¬ã‹ã‚‰è¦ç´„ã‚’ç”Ÿæˆ
        function generateSummaryFromScript(script) {
            if (!script || script.length === 0) return 'å†…å®¹ã®è¦ç´„ãŒã‚ã‚Šã¾ã›ã‚“';
            
            // æœ€åˆã®æ•°è¡Œã‹ã‚‰è¦ç´„ã‚’ä½œæˆï¼ˆã‚ˆã‚Šãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹é¢¨ã«ï¼‰
            let summary = '';
            
            // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ä¼šè©±ã‹ã‚‰ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æŠ½å‡º
            for (let i = 0; i < Math.min(3, script.length); i++) {
                if (script[i].type !== 'introduction' && script[i].text) {
                    // é‡è¦ãã†ãªéƒ¨åˆ†ã‚’æŠ½å‡º
                    const text = script[i].text;
                    if (text.includes('ã£ã¦') || text.includes('ã§ã™') || text.includes('ã¾ã™')) {
                        summary += text.substring(0, 60);
                        if (i < 2) summary += 'ã€‚';
                    }
                }
            }
            
            if (!summary && script.length > 0) {
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                summary = script[0].text.substring(0, 100);
            }
            
            if (summary.length > 120) {
                summary = summary.substring(0, 120) + '...';
            }
            
            return summary || 'ã“ã®è§£èª¬è¨˜äº‹ã®è©³ç´°ã‚’ã”è¦§ãã ã•ã„ã€‚èˆˆå‘³æ·±ã„å†…å®¹ãŒç››ã‚Šã ãã•ã‚“ï¼';
        }
        
        // å°æœ¬ã‹ã‚‰ã‚¿ã‚¤ãƒˆãƒ«ã‚’ç”Ÿæˆ
        function generateTitleFromScript(script) {
            if (!script || script.length === 0) return 'ç„¡é¡Œã®å°æœ¬';
            
            // introductionéƒ¨åˆ†ã‹ã‚‰ã‚¿ã‚¤ãƒˆãƒ«ã‚’æŠ½å‡º
            const intro = script.find(s => s.type === 'introduction');
            if (intro && intro.text) {
                const match = intro.text.match(/ã€Œ(.+?)ã€/);
                if (match) return match[1];
            }
            
            // æœ€åˆã®å°è©ã‹ã‚‰ç”Ÿæˆ
            const firstLine = script[0]?.text || '';
            if (firstLine.length > 30) {
                return firstLine.substring(0, 30) + '...';
            }
            
            return firstLine || 'ç„¡é¡Œã®å°æœ¬';
        }
        
        // æ™‚é–“ã‚’ç›¸å¯¾è¡¨ç¤º
        function getTimeAgo(timestamp) {
            if (!timestamp) return 'ä¸æ˜';
            
            const now = new Date();
            const date = new Date(timestamp);
            const diff = Math.floor((now - date) / 1000); // ç§’å˜ä½
            
            if (diff < 60) return 'ãŸã£ãŸä»Š';
            if (diff < 3600) return Math.floor(diff / 60) + 'åˆ†å‰';
            if (diff < 86400) return Math.floor(diff / 3600) + 'æ™‚é–“å‰';
            if (diff < 604800) return Math.floor(diff / 86400) + 'æ—¥å‰';
            
            return date.toLocaleDateString('ja-JP');
        }
        
        // æ–°ç€è¨˜äº‹ã‹åˆ¤å®š
        function isNewArticle(timestamp) {
            if (!timestamp) return false;
            const hourAgo = Date.now() - (60 * 60 * 1000);
            return new Date(timestamp).getTime() > hourAgo;
        }
        
        // è¨˜äº‹ã®è©³ç´°ã‚’è¡¨ç¤º
        function viewArticleDetail(articleId) {
            const articles = JSON.parse(localStorage.getItem('savedArticles') || '[]');
            const article = articles.find(a => a.id === articleId);
            
            if (!article) {
                alert('è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                return;
            }
            
            // é–²è¦§å›æ•°ã‚’å¢—ã‚„ã™
            article.viewCount = (article.viewCount || 0) + 1;
            localStorage.setItem('savedArticles', JSON.stringify(articles));
            
            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã§è¨˜äº‹ã‚’è¡¨ç¤º
            showArticleModal(article);
        }
        
        // è¨˜äº‹ã‚’ãƒ¢ãƒ¼ãƒ€ãƒ«ã§è¡¨ç¤º
        function showArticleModal(article) {
            const modal = document.createElement('div');
            modal.id = 'articleModal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.8);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                animation: fadeIn 0.3s ease;
            `;
            
            const title = article.title || generateTitleFromScript(article.script);
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 15px; width: 90%; max-width: 900px; max-height: 90vh; overflow-y: auto; position: relative; animation: slideUp 0.3s ease;">
                    <button onclick="closeArticleModal()" style="position: absolute; top: 15px; right: 15px; background: none; border: none; font-size: 24px; cursor: pointer; color: #999;">Ã—</button>
                    
                    <div style="padding: 30px;">
                        <h1 style="color: #333; margin-bottom: 10px; font-size: 24px;">
                            ${title}
                        </h1>
                        
                        <div style="display: flex; gap: 20px; margin-bottom: 20px; font-size: 14px; color: #666;">
                            <span>ğŸ• ${getTimeAgo(article.timestamp)}</span>
                            <span>ğŸ‘ ${article.viewCount || 0}å›é–²è¦§</span>
                            <span>ğŸ’¬ ${article.script ? article.script.length : 0}ã‚»ãƒªãƒ•</span>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                            ${renderScript(article.script)}
                        </div>
                        
                        <div style="margin-top: 30px; display: flex; gap: 10px; justify-content: center;">
                            <button onclick="copyArticleScript('${article.id}')" 
                                    style="padding: 12px 30px; background: #28a745; color: white; border: none; border-radius: 25px; cursor: pointer; font-weight: bold;">
                                ğŸ“‹ å°æœ¬ã‚’ã‚³ãƒ”ãƒ¼
                            </button>
                            <button onclick="shareArticle('${article.id}')" 
                                    style="padding: 12px 30px; background: #1DA1F2; color: white; border: none; border-radius: 25px; cursor: pointer; font-weight: bold;">
                                ğŸ¦ Twitterã§å…±æœ‰
                            </button>
                            <button onclick="closeArticleModal()" 
                                    style="padding: 12px 30px; background: #6c757d; color: white; border: none; border-radius: 25px; cursor: pointer; font-weight: bold;">
                                é–‰ã˜ã‚‹
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        // å°æœ¬ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderScript(script) {
            if (!script || script.length === 0) return '<p>å°æœ¬ãŒã‚ã‚Šã¾ã›ã‚“</p>';
            
            let html = '';
            script.forEach(line => {
                const characterName = getCharacterName(line.character);
                const characterImage = getCharacterImage(line.character);
                
                html += `
                    <div style="display: flex; gap: 15px; align-items: start; margin-bottom: 20px;">
                        <img src="${characterImage}" style="width: 50px; height: 50px; border-radius: 50%;">
                        <div style="flex: 1;">
                            <div style="font-weight: bold; color: #333; margin-bottom: 5px;">${characterName}</div>
                            <div style="background: white; padding: 12px 15px; border-radius: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                ${line.text}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            return html;
        }
        
        // è¨˜äº‹ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        function closeArticleModal() {
            const modal = document.getElementById('articleModal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => modal.remove(), 300);
            }
            // è¨˜äº‹ä¸€è¦§ã‚’æ›´æ–°
            loadUserArticlesAsNews();
            updateRanking();
        }
        
        // è¨˜äº‹ã®å°æœ¬ã‚’ã‚³ãƒ”ãƒ¼
        function copyArticleScript(articleId) {
            const articles = JSON.parse(localStorage.getItem('savedArticles') || '[]');
            const article = articles.find(a => a.id === articleId);
            
            if (article && article.script) {
                // è©±è€…åã‚’å«ã‚ãšã«ãƒ†ã‚­ã‚¹ãƒˆã®ã¿ã‚³ãƒ”ãƒ¼
                const text = article.script.map(line => {
                    return line.text;
                }).join('\n\n');
                
                navigator.clipboard.writeText(text).then(() => {
                    showNotification('å°æœ¬ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
                });
            }
        }
        
        // è¨˜äº‹ã‚’å…±æœ‰
        function shareArticle(articleId) {
            const articles = JSON.parse(localStorage.getItem('savedArticles') || '[]');
            const article = articles.find(a => a.id === articleId);
            
            if (article) {
                const title = article.title || generateTitleFromScript(article.script);
                const text = `ã€ã‚†ã£ãã‚Šå°æœ¬ã€‘${title}\n\n${window.location.origin}`;
                const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
                window.open(url, '_blank');
            }
        }
        
        // ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’æ›´æ–°
        function updateRanking() {
            const articles = JSON.parse(localStorage.getItem('savedArticles') || '[]');
            const rankingList = document.getElementById('rankingList');
            
            if (!articles || articles.length === 0) {
                rankingList.innerHTML = '<li style="color: #999; font-size: 14px;">ã¾ã è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“</li>';
                return;
            }
            
            // é–²è¦§æ•°ã§ã‚½ãƒ¼ãƒˆ
            const sortedArticles = [...articles].sort((a, b) => 
                (b.viewCount || 0) - (a.viewCount || 0)
            ).slice(0, 5);
            
            let html = '';
            sortedArticles.forEach((article, index) => {
                const title = article.title || generateTitleFromScript(article.script);
                html += `
                    <li style="margin-bottom: 10px;">
                        <a href="#" onclick="event.preventDefault(); viewArticleDetail('${article.id}')" 
                           style="color: #333; text-decoration: none; font-size: 14px;">
                            ${title}
                        </a>
                    </li>
                `;
            });
            
            rankingList.innerHTML = html;
        }
        
        // ãƒ‹ãƒ¥ãƒ¼ã‚¹è¦‹å‡ºã—ã‹ã‚‰å°æœ¬ã‚’ç”Ÿæˆï¼ˆäº’æ›æ€§ã®ãŸã‚æ®‹ã™ï¼‰
        function generateFromHeadline(headline, articleId) {
            // ã¾ãšå°æœ¬ç”Ÿæˆã‚¨ãƒªã‚¢ã‚’è¡¨ç¤º
            showScriptGenerationModal(headline, articleId);
        }
        
        // å°æœ¬ç”Ÿæˆãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        function showScriptGenerationModal(headline, articleId) {
            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’ä½œæˆ
            const modal = document.createElement('div');
            modal.id = 'scriptModal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.8);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                animation: fadeIn 0.3s ease;
            `;
            
            // ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å–å¾—
            const sampleContent = getSampleContent(articleId);
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 15px; width: 90%; max-width: 900px; max-height: 90vh; overflow-y: auto; position: relative; animation: slideUp 0.3s ease;">
                    <button onclick="closeScriptModal()" style="position: absolute; top: 15px; right: 15px; background: none; border: none; font-size: 24px; cursor: pointer; color: #999;">Ã—</button>
                    
                    <div style="padding: 30px;">
                        <h2 style="color: #764ba2; margin-bottom: 20px; font-size: 24px;">
                            ğŸ“° ${headline}
                        </h2>
                        
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <div style="display: flex; gap: 20px; align-items: center; margin-bottom: 15px;">
                                <img src="images/link/link-normal.png" style="width: 60px; height: 60px;">
                                <div style="flex: 1;">
                                    <div style="font-weight: bold; color: #333; margin-bottom: 5px;">å›æ–—ã‚Šã‚“ã</div>
                                    <div style="background: white; padding: 10px 15px; border-radius: 20px; display: inline-block;">
                                        ä»Šå›ã¯ã€Œ${headline}ã€ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¦ã„ãã‚ˆã€‚ã©ã‚“ãªå†…å®¹ãªã®ã‹ã€ä¸€ç·’ã«è¦‹ã¦ã„ã“ã†ï¼
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="generatedScript" style="margin-top: 20px;">
                            <div style="text-align: center; padding: 40px;">
                                <div class="loading-spinner" style="border: 4px solid #f3f3f3; border-top: 4px solid #764ba2; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
                                <div style="color: #666;">å°æœ¬ã‚’ç”Ÿæˆä¸­...</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 30px; display: flex; gap: 10px; justify-content: center;">
                            <button onclick="copyGeneratedScript()" style="padding: 12px 30px; background: #28a745; color: white; border: none; border-radius: 25px; cursor: pointer; font-weight: bold;">
                                ğŸ“‹ ã‚³ãƒ”ãƒ¼
                            </button>
                            <button onclick="closeScriptModal()" style="padding: 12px 30px; background: #6c757d; color: white; border: none; border-radius: 25px; cursor: pointer; font-weight: bold;">
                                é–‰ã˜ã‚‹
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // å°æœ¬ã‚’ç”Ÿæˆ
            setTimeout(() => {
                generateScriptFromContent(headline, sampleContent);
            }, 500);
        }
        
        // ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å–å¾—
        function getSampleContent(articleId) {
            const contents = {
                'jk-kanken': 'ä»¤å’Œä¸–ä»£ã®é–“ã§ã€ã€Œãƒ¯ãƒƒãƒšã€ã ã‘ã§ãªãæ§˜ã€…ãªæ˜”æ‡ã‹ã—ã„ãƒãƒƒã‚°ãŒäººæ°—ã¨ãªã£ã¦ã„ã¾ã™ã€‚ç‰¹ã«æ³¨ç›®ã•ã‚Œã¦ã„ã‚‹ã®ãŒã€Œã‚«ãƒ³ã‚±ãƒ³ã€ã¨å‘¼ã°ã‚Œã‚‹åŒ—æ¬§ç”Ÿã¾ã‚Œã®ãƒªãƒ¥ãƒƒã‚¯ã‚µãƒƒã‚¯ã€‚1978å¹´ã«ã‚¹ã‚¦ã‚§ãƒ¼ãƒ‡ãƒ³ã§èª•ç”Ÿã—ãŸã“ã®ãƒãƒƒã‚°ã¯ã€ä»Šã§ã¯æ—¥æœ¬ã®å¥³å­é«˜ç”Ÿã®å¿…éœ€å“ã¨ãªã£ã¦ã„ã¾ã™ã€‚ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ‡ã‚¶ã‚¤ãƒ³ã¨è±Šå¯Œãªã‚«ãƒ©ãƒ¼ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã€ãã—ã¦å®Ÿç”¨æ€§ã®é«˜ã•ãŒäººæ°—ã®ç†ç”±ã€‚ã¾ãŸã€æœ‰ç·šã‚¤ãƒ¤ãƒ›ãƒ³ã‚‚ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã¨ã—ã¦å†è©•ä¾¡ã•ã‚Œã¦ãŠã‚Šã€ã‚ãˆã¦ãƒ¯ã‚¤ãƒ¤ãƒ¬ã‚¹ã§ã¯ãªãæœ‰ç·šã‚’é¸ã¶è‹¥è€…ãŒå¢—ãˆã¦ã„ã¾ã™ã€‚',
                'fashion-trend': 'Zä¸–ä»£ã®é–“ã§ãƒŠãƒƒãƒ—ã‚¶ãƒƒã‚¯ãŒå¤§æµè¡Œã—ã¦ã„ã¾ã™ã€‚90å¹´ä»£ã«æµè¡Œã—ãŸã“ã®ã‚¢ã‚¤ãƒ†ãƒ ãŒã€ç´„30å¹´ã®æ™‚ã‚’çµŒã¦å†ã³ãƒˆãƒ¬ãƒ³ãƒ‰ã«ã€‚ç†ç”±ã¯ã€Œå®‰ã„ã€ã€Œè»½ã„ã€ã€Œãƒ‡ã‚³ã‚Šã‚„ã™ã„ã€ã®3ã¤ã€‚100å††ã‚·ãƒ§ãƒƒãƒ—ã§ã‚‚è³¼å…¥ã§ãã€ç¼¶ãƒãƒƒã‚¸ã‚„ã‚­ãƒ¼ãƒ›ãƒ«ãƒ€ãƒ¼ã§è‡ªåˆ†å¥½ã¿ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹ã®ãŒé­…åŠ›ã€‚SNSã§ã¯#ãƒŠãƒƒãƒ—ã‚¶ãƒƒã‚¯ã‚³ãƒ¼ãƒ‡ã®ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã§ã€å€‹æ€§çš„ãªã‚¢ãƒ¬ãƒ³ã‚¸ãŒæ¬¡ã€…ã¨æŠ•ç¨¿ã•ã‚Œã¦ã„ã¾ã™ã€‚',
                'wired-earphones': 'ãƒ¯ã‚¤ãƒ¤ãƒ¬ã‚¹ã‚¤ãƒ¤ãƒ›ãƒ³ãŒä¸»æµã®ä¸­ã€ã‚ãˆã¦æœ‰ç·šã‚¤ãƒ¤ãƒ›ãƒ³ã‚’é¸ã¶è‹¥è€…ãŒå¢—ãˆã¦ã„ã¾ã™ã€‚ç†ç”±ã¯ã€Œå……é›»ä¸è¦ã§ä½¿ã„ãŸã„æ™‚ã«ã™ãä½¿ãˆã‚‹ã€ã€ŒéŸ³è³ªãŒå®‰å®šã—ã¦ã„ã‚‹ã€ã€Œä¾¡æ ¼ãŒæ‰‹é ƒã€ãªã©å®Ÿç”¨çš„ãªé¢ã«åŠ ãˆã€ã€ŒY2Kãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã«åˆã†ã€ã€Œãƒ¬ãƒˆãƒ­ã§ãŠã—ã‚ƒã‚Œã€ã¨ã„ã£ãŸãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³çš„ãªå´é¢ã‚‚ã€‚ç‰¹ã«ç™½ã„æœ‰ç·šã‚¤ãƒ¤ãƒ›ãƒ³ã¯ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒãƒ¼ãƒˆã®ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã¨ã—ã¦äººæ°—ã‚’é›†ã‚ã¦ã„ã¾ã™ã€‚'
            };
            return contents[articleId] || 'æœ€æ–°ã®ãƒˆãƒ¬ãƒ³ãƒ‰æƒ…å ±ã‚’ãŠå±Šã‘ã—ã¾ã™ã€‚è‹¥è€…ã®é–“ã§è©±é¡Œã¨ãªã£ã¦ã„ã‚‹æ§˜ã€…ãªãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã‚„æ–‡åŒ–ã«ã¤ã„ã¦ã€è©³ã—ãè§£èª¬ã—ã¦ã„ãã¾ã™ã€‚';
        }
        
        // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰å°æœ¬ã‚’ç”Ÿæˆ
        function generateScriptFromContent(headline, content) {
            // ScriptGeneratorã‚’ä½¿ç”¨
            const generator = new ScriptGenerator();
            const options = {
                newsTitle: headline,
                useIntroduction: true,
                useSummary: true,
                mode: 'simple'
            };
            
            const script = generator.generate(content, options);
            
            // ç”Ÿæˆã•ã‚ŒãŸå°æœ¬ã‚’è¡¨ç¤º
            const scriptDiv = document.getElementById('generatedScript');
            if (scriptDiv) {
                let html = '<div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">';
                
                script.forEach((line, index) => {
                    const characterName = getCharacterName(line.character);
                    const characterImage = getCharacterImage(line.character);
                    
                    html += `
                        <div style="display: flex; gap: 15px; align-items: start; margin-bottom: 20px;">
                            <img src="${characterImage}" style="width: 50px; height: 50px; border-radius: 50%;">
                            <div style="flex: 1;">
                                <div style="font-weight: bold; color: #333; margin-bottom: 5px;">${characterName}</div>
                                <div style="background: white; padding: 12px 15px; border-radius: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                    ${line.text}
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                scriptDiv.innerHTML = html;
                
                // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«ä¿å­˜ï¼ˆã‚³ãƒ”ãƒ¼ç”¨ï¼‰
                window.generatedScriptData = script;
            }
        }
        
        // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åå–å¾—
        function getCharacterName(character) {
            const names = {
                'tanunee': 'ãŸã¬ã­ãˆ',
                'konta': 'ã“ã‚“ãŸ',
                'link': 'å›æ–—ã‚Šã‚“ã'
            };
            return names[character] || character;
        }
        
        // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒå–å¾—
        function getCharacterImage(character) {
            const images = {
                'tanunee': 'images/tanunee/tanuki-yukkuri-normal-mouth-closed.png',
                'konta': 'images/konta/kitsune-yukkuri-normal.png',
                'link': 'images/link/link-normal.png'
            };
            return images[character] || 'images/default.png';
        }
        
        // ç”Ÿæˆã•ã‚ŒãŸå°æœ¬ã‚’ã‚³ãƒ”ãƒ¼
        function copyGeneratedScript() {
            if (window.generatedScriptData) {
                const text = window.generatedScriptData.map(line => {
                    const name = getCharacterName(line.character);
                    return `${name}ï¼š${line.text}`;
                }).join('\n\n');
                
                navigator.clipboard.writeText(text).then(() => {
                    showNotification('å°æœ¬ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
                });
            }
        }
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        function closeScriptModal() {
            const modal = document.getElementById('scriptModal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => modal.remove(), 300);
            }
        }
        
        // ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
        function filterNews(category) {
            // ã‚«ãƒ†ã‚´ãƒªã«å¿œã˜ã¦ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’çµã‚Šè¾¼ã‚€å‡¦ç†
            console.log('Filtering news by:', category);
        }
        
        // ã‚³ãƒ³ãƒãƒ¼ã‚¿ãƒ¼ã‚¨ãƒªã‚¢ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        function scrollToConverter() {
            const converterSection = document.querySelector('.main-grid');
            if (converterSection) {
                converterSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
        
        // é€šçŸ¥è¡¨ç¤º
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #333;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
        if (!document.getElementById('notificationStyles')) {
            const style = document.createElement('style');
            style.id = 'notificationStyles';
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes fadeOut {
                    from { opacity: 1; }
                    to { opacity: 0; }
                }
                @keyframes slideUp {
                    from { transform: translateY(50px); opacity: 0; }
                    to { transform: translateY(0); opacity: 1; }
                }
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
            `;
            document.head.appendChild(style);
        }
    </script>
    <!-- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script src="js/modules/input-handler.js"></script>
    <script src="js/modules/script-generator.js"></script>
    <script src="js/modules/display-manager.js"></script>
    <script src="js/modules/storage-manager.js"></script>
    
    <!-- æ—¢å­˜ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script src="config/config.js"></script>
    <script src="js/api-limiter.js"></script>
    <script src="js/gemini-api.js"></script>
    <script src="js/yukkuri-converter.js"></script>
    <script src="js/chat-logger.js"></script>
    <script src="js/main.js"></script>
    <script src="js/ai-functions-fix.js"></script>
    <script src="js/twitter-share.js"></script>
    <script src="js/background-decoration.js"></script>
    <script src="js/api-setup-helper.js"></script>
    
    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ -->
    <script src="js/main-controller.js"></script>
    
    <!-- Yahoo Newsé¢¨è¨˜äº‹ä¿å­˜æ©Ÿèƒ½ -->
    <script>
        // Yahoo Newsé¢¨ã®è¨˜äº‹ã¨ã—ã¦ä¿å­˜
        function saveAsYahooNewsArticle() {
            // ç¾åœ¨ã®å°æœ¬ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            const scriptData = window.currentScriptData || [];
            
            if (scriptData.length === 0) {
                alert('ã¾ãšå°æœ¬ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„');
                return;
            }
            
            // ã‚¿ã‚¤ãƒˆãƒ«å…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.8);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                animation: fadeIn 0.3s ease;
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 15px; padding: 30px; width: 90%; max-width: 500px; animation: slideUp 0.3s ease;">
                    <h2 style="color: #333; margin-bottom: 20px;">ğŸ“° è¨˜äº‹ã¨ã—ã¦å…¬é–‹</h2>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; color: #666; font-size: 14px;">è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«</label>
                        <input type="text" id="articleTitleInput" 
                               placeholder="ä¾‹ï¼šJKã®å¿…éœ€å“ã€Œã‚«ãƒ³ã‚±ãƒ³ã€ã¨ã¯ï¼Ÿ" 
                               style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px;">
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; color: #666; font-size: 14px;">ã‚«ãƒ†ã‚´ãƒª</label>
                        <select id="articleCategorySelect" 
                                style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px;">
                            <option value="general">ç·åˆ</option>
                            <option value="entertainment">ã‚¨ãƒ³ã‚¿ãƒ¡</option>
                            <option value="tech">ITãƒ»ç§‘å­¦</option>
                            <option value="lifestyle">ãƒ©ã‚¤ãƒ•</option>
                            <option value="other">ãã®ä»–</option>
                        </select>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button onclick="this.closest('[style*=\"position: fixed\"]').remove()" 
                                style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 8px; cursor: pointer;">
                            ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                        </button>
                        <button onclick="confirmSaveArticle()" 
                                style="padding: 10px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
                            å…¬é–‹ã™ã‚‹
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¿ã‚¤ãƒˆãƒ«ã‚’è¨­å®š
            setTimeout(() => {
                const titleInput = document.getElementById('articleTitleInput');
                if (titleInput && scriptData[0]) {
                    // introduction ã‹ã‚‰æŠ½å‡º
                    const intro = scriptData.find(s => s.type === 'introduction');
                    if (intro) {
                        const match = intro.text.match(/ã€Œ(.+?)ã€/);
                        if (match) {
                            titleInput.value = match[1];
                        }
                    }
                }
            }, 100);
        }
        
        // è¨˜äº‹ä¿å­˜ã‚’ç¢ºå®š
        function confirmSaveArticle() {
            const title = document.getElementById('articleTitleInput').value;
            const category = document.getElementById('articleCategorySelect').value;
            
            if (!title.trim()) {
                alert('ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            // è¨˜äº‹ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ
            const article = {
                id: 'article_' + Date.now(),
                title: title,
                category: category,
                script: window.currentScriptData || [],
                timestamp: new Date().toISOString(),
                viewCount: 0,
                author: getCurrentUserInfo()
            };
            
            // LocalStorageã«ä¿å­˜
            const savedArticles = JSON.parse(localStorage.getItem('savedArticles') || '[]');
            savedArticles.unshift(article); // æœ€æ–°ã‚’å…ˆé ­ã«
            
            // æœ€å¤§50ä»¶ã¾ã§ä¿å­˜
            if (savedArticles.length > 50) {
                savedArticles = savedArticles.slice(0, 50);
            }
            
            localStorage.setItem('savedArticles', JSON.stringify(savedArticles));
            
            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
            document.querySelector('[style*="position: fixed"]').remove();
            
            // æˆåŠŸé€šçŸ¥
            showNotification('è¨˜äº‹ã‚’å…¬é–‹ã—ã¾ã—ãŸï¼');
            
            // è¨˜äº‹ä¸€è¦§ã‚’æ›´æ–°
            loadUserArticlesAsNews();
            updateRanking();
        }
        
        // ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—
        function getCurrentUserInfo() {
            // æ–°å½¢å¼ã®Twitterãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å„ªå…ˆ
            const twitterUser = localStorage.getItem('twitter_user');
            if (twitterUser) {
                try {
                    const user = JSON.parse(twitterUser);
                    if (user.loggedIn) {
                        return {
                            username: user.username || 'guest',
                            avatar: user.profileImage || 'images/link/link-normal.png'
                        };
                    }
                } catch (e) {
                    console.error('Twitter user parse error:', e);
                }
            }
            
            // æ—§å½¢å¼ã®userProfileã‚‚ãƒã‚§ãƒƒã‚¯
            const userProfile = localStorage.getItem('userProfile');
            if (userProfile) {
                try {
                    const user = JSON.parse(userProfile);
                    return {
                        username: user.username || 'guest',
                        avatar: user.profileImage || user.avatar || 'images/link/link-normal.png'
                    };
                } catch (e) {
                    console.error('User profile parse error:', e);
                }
            }
            return {
                username: 'guest',
                avatar: 'images/link/link-normal.png'
            };
        }
    </script>
    
    <!-- åˆæœŸåŒ–æ™‚ã«åˆ©ç”¨çŠ¶æ³è¡¨ç¤º -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // APIåˆ©ç”¨çŠ¶æ³ã‚’åˆæœŸè¡¨ç¤º
            setTimeout(() => {
                if (typeof updateUsageDisplay === 'function') {
                    updateUsageDisplay();
                }
            }, 500);
        });
    </script>
</body>
</html>